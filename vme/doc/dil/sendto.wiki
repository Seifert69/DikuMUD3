= sendto =
 function: void '''sendto'''(s : string, u : unitptr);

The '''sendto''' function sends a message to all DIL programs within a specific unit.

== Description ==
The sendto function sends a message to all DIL programs that are currently inside the specified unit. This is commonly used to communicate with DIL programs that are running within objects, NPCs, or rooms. The message is sent with the SFB_MSG message class, allowing receiving programs to respond appropriately.

== PARAMETERS ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| s || string || The message to send to all programs within the unit
|-
| u || unitptr || The unit containing the DIL programs to receive the message
|}

== Examples ==
=== Object Communication ===
 dilbegin magic_sword_speak();
 code
 {
     sendto("The sword glows with ancient power.", self);
     pause;
     sendto("The sword whispers: 'I am ready for battle!'", self);
 }
 dilend

=== Room Messages ===
 dilbegin room_announcement();
 var
     message : string;
 code
 {
     message := "The room begins to shake violently!";
     sendto(message, self.outside);
     
     pause;
     sendto("The shaking subsides.", self.outside);
 }
 dilend

=== Container Communication ===
 dilbegin chest_talk();
 var
     chest : unitptr;
 code
 {
     chest := findunit(self, "chest", FIND_UNIT_SURRO, null);
     if (chest == null)
         quit;
     
     sendto("The chest rumbles: 'Who dares to open me?'", chest);
     
     if (chest.inside != null)
         sendto("The chest speaks: 'Someone is already inside!'", chest);
     else
         sendto("The chest speaks: 'I am empty and waiting.'", chest);
 }
 dilend

== Usage Notes ==
* The function sends messages to all DIL programs within the target unit
* Messages are sent with the SFB_MSG message class
* Receiving programs must be waiting with interrupt(SFB_MSG, ...) to receive messages
* The target unit must contain DIL programs for the messages to be received
* Commonly used for object-NPC, object-room, and room-program communication
* No automatic formatting like [[Manual:DIL_Manual/sendtext|sendtext]] - messages are sent as-is

== Message Reception ==
DIL programs can receive sendto messages using:
 interrupt(SFB_MSG, condition, label)
The condition typically checks if the message is relevant to the receiving program.

== Error Handling ==
* Function will fail if the target unit is null
* No validation of message content - any string is accepted
* No return value - function cannot indicate success or failure
* Invalid unit pointers may cause runtime errors

== Related Functions/Fields ==
* [[Manual:DIL_Manual/sendtoall|sendtoall]] - Function for sending messages to all units globally
* [[Manual:DIL_Manual/sendtoalldil|sendtoalldil]] - Function for sending to specific DIL programs
* [[Manual:DIL_Manual/sendtext|sendtext]] - Function for sending text to specific units
* [[Manual:DIL_Manual/interrupt|interrupt]] - Function for receiving incoming messages
* [[Manual:DIL_Manual/unitptr|unitptr]] - Unit pointer type and operations
* [[Manual:DIL_Manual/inside|inside]] - Field for accessing units within containers

== See Also ==
* DIL program communication and coordination
* Message passing and synchronization
* Unit interaction and container systems