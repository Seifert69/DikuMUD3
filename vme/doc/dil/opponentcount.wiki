= opponentcount =
 field: integer '''.opponentcount''' (Read-only)

== Description ==
The '''opponentcount''' field provides access to the number of opponents a character is currently fighting. This field indicates how many different units the character is engaged in combat with.

Based on the C implementation, this field calls the `NoOpponents()` method to retrieve the current opponent count for the character.

== Field Access ==
This is a field access on character unitptrs:
 char.opponentcount

== Availability ==
This field is available on the following unit types:
* UNIT_ST_PC (Player Character)
* UNIT_ST_NPC (Non-Player Character)

== Usage Notes ==
The opponentcount field is read-only (RO) and cannot be modified directly.
This field represents the total number of opponents, not just the primary opponent.
A value of 0 means the character is not currently fighting anyone.
This field is useful for checking combat status and multi-opponent situations.

== Examples ==
=== Basic Combat Status Check ===
 dilbegin check_combat_status(target : unitptr);
 var
    opponent_num : integer;
 
 code
 {
    if ((target.type != UNIT_ST_PC) and (target.type != UNIT_ST_NPC))
    {
       act("$1n is not a character.", A_ALWAYS, self, target, null, TO_CHAR);
       return;
    }
    
    opponent_num := target.opponentcount;
    
    if (opponent_num == 0)
       act("$1n is not fighting anyone.", A_ALWAYS, self, target, null, TO_CHAR);
    else if (opponent_num == 1)
       act("$1n is fighting one opponent.", A_ALWAYS, self, target, null, TO_CHAR);
    else
       act("$1n is fighting $1d opponents.", A_ALWAYS, self, opponent_num, target, TO_CHAR);
 } dilend

=== Multi-Opponent Detection ===
 dilbegin detect_gang_attack();
 var
    aggressor : unitptr;
    victim : unitptr;
 
 code
 {
    // Look for characters fighting multiple opponents
    foreach (UNIT_ST_PC, aggressor)
    {
       if (aggressor.opponentcount > 1)
       {
          act("$1n is fighting multiple opponents!", A_ALWAYS, self, aggressor, null, TO_CHAR);
          
          // Find who they're fighting
          foreach (UNIT_ST_PC, victim)
          {
             if (opponent(aggressor, victim))
                act("  -> $1n", A_ALWAYS, self, victim, null, TO_CHAR);
          }
       }
    }
 } dilend

== Error Handling ==
Always verify that unit is a character before accessing opponentcount:

 if ((unit.type == UNIT_ST_PC) or (unit.type == UNIT_ST_NPC))
 {
    count := unit.opponentcount;
 }
 else
 {
    act("Not a character unit.", A_ALWAYS, self, null, null, TO_CHAR);
 }

== Related Functions/Fields ==
* [[Manual:DIL_Manual/opponent|opponent]] - Check if two characters are opponents
* [[Manual:DIL_Manual/fighting|fighting]] - Get current primary opponent
* [[Manual:DIL_Manual/set_fighting|set_fighting]] - Set combat between characters
* [[Manual:DIL_Manual/position|position]] - Character position (affects combat status)
* [[Manual:DIL_Manual/charflags|charflags]] - Character flags for combat states

== See Also ==
* [[Manual:DIL_Manual/unit_st_pc and unit_st_npc|unit_st_pc and unit_st_npc]] - Character-specific fields
* [[Manual:DIL_Manual/fighting|fighting]] - Primary opponent field
* [[Manual:DIL_Manual/opponent|opponent]] - Opponent checking function
* [[Manual:DIL_Manual/set_fighting|set_fighting]] - Combat setup function
* [[Manual:DIL_Manual/position|position]] - Character positioning system