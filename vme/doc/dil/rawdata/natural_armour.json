{
    "keyword": "natural_armour",
    "opcode": "DILSF_NARM",
    "yacc_rule": "| DILSF_NARM /* .natural_armour */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_LFT;\n    $$.num = DILF_NARM;\n}",
    "dilfe_name": "DILF_NARM",
    "c_implementation": "case DILF_NARM:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                {\n                    auto *character = reinterpret_cast<char_data *>(v1->val.ptr);\n                    if (character && character->isChar())\n                    {\n                        v->atyp = DILA_NONE;\n                        v->type = DILV_UINT1R;\n                        v->ref = character->getNaturalArmorPtr();\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                }\n                break;\n\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin aware recall pc_arena ();\nvar\n speed_int:integer;\n exp_int:integer;\n charflags_int:integer;\n mana_int:integer;\n endurance_int:integer;\n attacktype_int:integer;\n armourtype_int:integer;\n race_int:integer;\n sex_int:integer;\n level_int:integer;\n vlevel_int:integer;\n position_int:integer;\n pcflags_int:integer;\n crimes_int:integer;\n full_int:integer;\n thirst_int:integer;\n drunk_int:integer;\n hit_int:integer;\ncode\n{\n\n speed_int:=0;\n exp_int:=0;\n charflags_int:=0;\n mana_int:=0;\n endurance_int:=0;\n attacktype_int:=0;\n armourtype_int:=0;\n race_int:=0;\n sex_int:=0;\n level_int:=0;\n vlevel_int:=0;\n position_int:=0;\n pcflags_int:=0;\n crimes_int:=0;\n full_int:=0;\n thirst_int:=0;\n drunk_int:=0;\n hit_int:=0;\n\n speed_int:=self.speed;\n  exp_int:=self.exp;\n charflags_int:=self.charflags;\n mana_int:=self.mana;\n  endurance_int:=self.endurance;\n   attacktype_int:=self.attack_type;\n armourtype_int:=self.natural_armour;\n race_int:=self.race;\n sex_int:=self.sex;\n level_int:=self.level;\n vlevel_int:=self.vlevel;\n position_int:=self.position;\n pcflags_int:=self.pcflags;\n crimes_int:=self.crimes;\n full_int:=self.full;\n thirst_int:=self.thirst;\n drunk_int:=self.drunk;\nhit_int:=self.hp;\n\nset (self.pcflags,PC_PK_RELAXED);\n\ninterrupt (SFB_MSG, ((argument==\"destroy arena\") and\n(self==activator)),exit_arena);\nwait (SFB_MSG, (argument ==\"never come\") and\n(activator==self));\n\n\n:exit_arena:\n/*self.speed:=speed_int;*/\nself.exp:=  exp_int;\nself.charflags:= charflags_int;\nself.mana:= mana_int;\nself.endurance:=  endurance_int;\nself.attack_type:=   attacktype_int;\nself.natural_armour:= armourtype_int;\nself.race:= race_int;\nself.sex:= sex_int;\nself.level:= level_int;\n/*self.vlevel:= vlevel_int;*/\nself.position:= position_int;\nself.pcflags:=pcflags_int;\nself.crimes:= crimes_int;\nself.full:= full_int;\nself.thirst:= thirst_int;\nself.drunk:= drunk_int;\nself.hp:=hit_int;\nsubextra(self.extra,\"$PK_TIMER\");\nposition_update(self);\nquit;\n} dilend"
}