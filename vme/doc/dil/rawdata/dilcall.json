{
    "keyword": "dilcall",
    "opcode": "DILSE_CALL",
    "yacc_rule": "| DILSE_CALL '(' dilexp ')' '(' dilexp ',' dilexp ',' dilexp ')'\n{\n    // I should really get the second parameter set as variable, but\n    // I don't have the time right now.\n    //\n    INITEXP($$);\n    if ($3.typ != DilVarType_e::DILV_SP)\n    {\n        dilfatal(\"Arg 1 of 'dilcall' not a string\");\n    }\n    else if ($6.typ != DilVarType_e::DILV_UP)\n    {\n        dilfatal(\"Arg 2 of 'dilcall' not a unitptr\");\n    }\n    else if ($8.typ != DilVarType_e::DILV_INT)\n    {\n        dilfatal(\"Arg 3 of 'dilcall' not an integer\");\n    }\n    else if ($10.typ != DilVarType_e::DILV_SP)\n    {\n        dilfatal(\"Arg 4 of 'dilcall' not a string\");\n    }\n    else\n    {\n        /* Type is ok */\n        /* Make nodes dynamic */\n        $$.dsl = DSL_DYN;\n        $$.typ = DilVarType_e::DILV_INT;\n        make_code(&($3));\n        make_code(&($6));\n        make_code(&($8));\n        make_code(&($10));\n        add_code(&($$), &($3));\n        add_code(&($$), &($6));\n        add_code(&($$), &($8));\n        add_code(&($$), &($10));\n        add_ubit8(&($$), DILE_CALL);\n    }\n    FREEEXP($3);\n    FREEEXP($6);\n    FREEEXP($8);\n    FREEEXP($10);\n}",
    "dilfe_name": "dilfe_call",
    "c_implementation": "void dilfe_call(dilprg *p)\n{\n    dilval *v = new dilval;\n    /* Detection of DIL programs (TRUE/FALSE) */\n\n    dilval *v4 = p->stack.pop(); // string\n    dilval *v3 = p->stack.pop(); // integer\n    dilval *v2 = p->stack.pop(); // unitptr\n    dilval *v1 = p->stack.pop(); // The DIL to call\n\n    v->type = DILV_ERR; /* wrong type */\n\n    switch (dil_getval(v4))\n    {\n        case DILV_SP:\n            switch (dil_getval(v3))\n            {\n                case DILV_INT:\n                    switch (dil_getval(v2))\n                    {\n                        case DILV_UP:\n                            switch (dil_getval(v1))\n                            {\n                                case DILV_SP:\n                                    if (v1->val.ptr)\n                                    {\n                                        v->type = DILV_INT;\n                                        v->atyp = DILA_NONE;\n                                        v->val.num = -1;\n\n                                        diltemplate *tmpl = nullptr;\n                                        tmpl = find_dil_template((char *)v1->val.ptr);\n\n                                        if (tmpl)\n                                        {\n                                            //\n                                            // Push frame\n                                            //\n                                            p->stack.push(v2);\n                                            p->stack.push(v3);\n                                            p->stack.push(v4);\n\n                                            delete v1;\n                                            // Don't delete v2-v4 they now live on the stack.\n\n                                            dil_push_frame(p, tmpl);\n                                            return;\n                                        }\n                                        else\n                                        {\n                                            szonelog(p->sarg->owner->getFileIndex()->getZone(),\n                                                     \"DIL %s, Unable to find template %s\",\n                                                     p->sarg->owner->getFileIndexSymName(),\n                                                     (char *)v1->val.ptr);\n                                        }\n                                    }\n                                    break;\n                                case DILV_NULL:\n                                case DILV_FAIL:\n                                    v->type = DILV_FAIL;\n                                    break;\n                                default:\n                                    v->type = DILV_ERR; /* wrong type */\n                                    break;\n                            }\n                            break;\n                        case DILV_NULL:\n                        case DILV_FAIL:\n                            v->type = DILV_FAIL;\n                            break;\n                        default:\n                            v->type = DILV_ERR; /* wrong type */\n                            break;\n                    }\n            }\n    }\n\n    p->stack.push(v);\n    delete v1;\n    delete v2;\n    delete v3;\n    delete v4;\n}",
    "dil_example": "dilbegin constants();\nvar\n    r8il        : intlist global roll8@randomt;\n    ilBladeMat  : intlist global ilBladeMat@randomt;\n    ilHiltMat   : intlist global ilHiltMat@randomt;\n\n    ilJewelryMat : intlist global ilJewelryMat@randomt;\n    ilGems        : intlist    global ilGems@randomt;\n\n    slMatNames  : stringlist global slMatNames@randomt;\n    ilMatValues : intlist    global ilMatValues@randomt;\n\n    ilHeadMat    : intlist global ilHeadMat@randomt;\n    ilHandleMat  : intlist global ilHandleMat@randomt;\n\n    ilStaffMat   : intlist global ilStaffMat@randomt;\n    ilWhipMat    : intlist global ilWhipMat@randomt;\n\n    slWeapons    : stringlist global slWeapons@randomt;\n    ilWeapons    : intlist global ilWeapons@randomt;\n    ilMartial    : intlist global ilMartial@randomt;\n    ilSkills     : intlist global ilSkills@randomt;\n    ilSpells     : intlist global ilSpells@randomt;\n\n    i : integer;\n\ncode\n{\n    if (length(r8il) > 0)\n    {\n        log(\"HEYA : Setting global constants called twice.\");\n        return;\n    }\n\n    log(\"Setting global constants for the randomt zone.\");\n\n    // Tables for 2d8 used for bonus adjustment\n    // The two leftmost values can't be used (1d8+1d8=[2..16])\n    r8il := {-7,-7,-3,-2,-2,-1,-1,-1,-1,-1,-1,0,0,0,0,1,1};\n\n    // Weapon materials for forging \"blades\": swords, mattock heads, mace heads, bardiches, \n\n    // Blade1: main material for sword blade & guard\n    ilBladeMat   := {MAT_TIN, MAT_TIN, MAT_TIN, MAT_TIN, MAT_COPPER, MAT_COPPER, MAT_BRONZE, \n                     MAT_IRON,\n                     MAT_DARK_IRON, MAT_STEEL, MAT_HIGH_STEEL, MAT_BLACK_STEEL, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};\n\n    // Blade2: main material for the hilt\n    ilHiltMat    := {MAT_TIN, MAT_TIN, MAT_TIN, MAT_TIN, MAT_COPPER, MAT_COPPER, MAT_BRONZE, \n                     MAT_IRON,\n                     MAT_DARK_IRON, MAT_STEEL, MAT_HIGH_STEEL, MAT_BLACK_STEEL, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};\n\n    ilJewelryMat  := {MAT_TIN, MAT_TIN, MAT_TIN, MAT_TIN, MAT_COPPER, MAT_BRONZE, MAT_BRASS,\n                       MAT_IRON,\n                       MAT_DARK_IRON, MAT_SILVER, MAT_GOLD, MAT_PLATINUM, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};\n\n    ilGems         := {MAT_GRANITE, MAT_GRANITE, MAT_GRANITE, MAT_GRANITE, MAT_GRANITE, MAT_MARBLE, MAT_OBSIDIAN, \n                       MAT_ONYX, \n                       MAT_MOONSTONE, MAT_PEARL, MAT_AMBER, MAT_EMERALD, MAT_SAPPHIRE, MAT_RUBY, MAT_DIAMOND};\n\n\n    // Weapon materials for forging \"heads\": axes, hammers, spears, javelins, arrows\n    ilHeadMat  := {MAT_COPPER, MAT_COPPER, MAT_COPPER, MAT_COPPER, MAT_COPPER, MAT_COPPER, MAT_BRONZE, \n                   MAT_IRON,\n                   MAT_DARK_IRON, MAT_STEEL, MAT_HIGH_STEEL, MAT_BLACK_STEEL, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};\n\n    // Weapon materials for forging \"heads\": axes, hammers, spears, javelins, arrows\n    ilHandleMat  := {MAT_PINE, MAT_PINE, MAT_PINE, MAT_BIRCH, MAT_ASH, MAT_COPPER, MAT_BRONZE, \n                     MAT_IRON,\n                     MAT_DARK_IRON, MAT_STEEL, MAT_HIGH_STEEL, MAT_BLACK_STEEL, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};\n\n    // Weapon materials for staves \n    ilStaffMat := {MAT_PINE, MAT_BIRCH, MAT_WALNUT, MAT_MAPLE, MAT_OAK, MAT_WILLOW, MAT_HICKORY, \n                   MAT_TEAK,\n                   MAT_MAHOGANY, MAT_IPE, MAT_BLACK_OAK, MAT_BLACK_STEEL, MAT_DARK_WOOD, MAT_MALLORN, MAT_ENTE_WOOD};\n\n    // Weapon materials for staves \n    ilWhipMat := {MAT_LEATHER, MAT_LEATHER, MAT_LEATHER, MAT_LEATHER, MAT_LEATHER, MAT_LEATHER, MAT_LEATHER, \n                   MAT_LEATHER,\n                   MAT_SHARK_HIDE, MAT_ELEPHANT_HIDE, MAT_CHIMERA_HIDE, MAT_GRIFFON_HIDE, MAT_BASILISK_HIDE, MAT_DRAKE_HIDE, MAT_DRAGON_HIDE};\n\n/*\n    // Weapon materials for forging \"clubs\": clubs (nails/reinforcement), quarterstaff (tip)\n    // Difference to blades is that it can be all wood\n    ilClubMat  := {MAT_NONE, MAT_NONE,\n                        MAT_NONE, MAT_NONE, MAT_NONE, MAT_NONE, MAT_NONE, MAT_NONE, MAT_BRONZE, \n                        MAT_IRON,\n                        MAT_DARK_IRON, MAT_STEEL, MAT_HIGH_STEEL, MAT_BLACK_STEEL, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};\n\n    // Weapon materials for forging \"clubs\": clubs (nails/reinforcement), quarterstaff (tip)\n    // Difference to blades is that it can be all wood\n    ilClubMat  := {MAT_NONE, MAT_NONE,\n                        MAT_NONE, MAT_NONE, MAT_NONE, MAT_NONE, MAT_NONE, MAT_NONE, MAT_BRONZE, \n                        MAT_IRON,\n                        MAT_DARK_IRON, MAT_STEEL, MAT_HIGH_STEEL, MAT_BLACK_STEEL, MAT_ADAMANTIUM, MAT_ITHILNAUR, MAT_MITHRIL};*/\n\n\n\n    // weapon id, cost ip, weight, main function, main kind, sec function, sec kind, names\n    // Note that the main kind, e.g. \"blade\" is also used to dilcall the DIL func: \"mat\"+kind+\"Idx\" which resolves the main materials\n    // e.g. matBladeIndex is used to get the main material of swords.\n    // Most common first, most rare last\n    slWeapons := {\n        \"0\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"1\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"2\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"3\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"4\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"5\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"6\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_BATTLE_AXE),    \"160\", \"16\",  \"setWpnSharp@randomt\", \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"battle axe//axe\", // 7\n        QUOTE(WPN_HAND_AXE),       \"60\",  \"6\",  \"setWpnSharp@randomt\", \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"hand axe//axe\", \n        QUOTE(WPN_WAR_MATTOCK),    \"90\", \"10\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"war mattock//mattock\",\n        QUOTE(WPN_WAR_HAMMER),     \"55\", \"25\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"war hammer//hammer\",  // Thor's hammer\n        QUOTE(WPN_GREAT_SWORD),   \"200\", \"16\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"great sword//sword\", \n        QUOTE(WPN_SCIMITAR),      \"100\",  \"7\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"scimitar\", \n        \"13\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_FALCHION),       \"90\",  \"9\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"falchion\", \n        \"15\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_BROAD_SWORD),   \"100\",  \"8\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"broad sword//sword\", \n        QUOTE(WPN_LONG_SWORD),    \"100\",  \"8\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"long sword//sword\", \n        QUOTE(WPN_RAPIER),         \"60\",  \"4\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"rapier\", \n        QUOTE(WPN_SHORT_SWORD),    \"70\",  \"6\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"short sword//sword\",\n        QUOTE(WPN_DAGGER),         \"40\",  \"1\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"dagger\",\n        QUOTE(WPN_BATTLE_MACE),    \"80\", \"12\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"battle mace//mace\", \n        QUOTE(WPN_MACE),           \"60\",  \"6\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"mace\", \n        QUOTE(WPN_BATTLE_CLUB),    \"30\", \"12\",  \"setWpnClub@randomt\",  \"base\",  \"setWpnHilt@randomt\",  \"grip\", \"battle club//club\",\n        QUOTE(WPN_CLUB),           \"10\",  \"6\",  \"setWpnClub@randomt\",  \"base\",  \"setWpnHilt@randomt\",  \"handle\", \"club\",\n        QUOTE(WPN_MORNING_STAR),   \"10\", \"10\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"handle\", \"morning star\",  \n        QUOTE(WPN_FLAIL),          \"20\", \"14\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"handle\", \"flail\",    \n        QUOTE(WPN_QUARTERSTAFF),    \"4\",  \"4\",  \"setWpnStaff@randomt\", \"staff\", \"setWpnTips@randomt\",  \"tips\",   \"quarterstaff//staff\",\n        QUOTE(WPN_SPEAR),          \"10\",  \"4\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"shaft\",  \"spear\",\n        QUOTE(WPN_HALBERD),        \"20\", \"10\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"shaft\",  \"halberd\",\n        QUOTE(WPN_BARDICHE),       \"20\", \"10\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"shaft\",  \"bardiche\",\n        QUOTE(WPN_SICKLE),          \"2\",  \"5\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnShaft@randomt\", \"handle\", \"sickle\",\n        QUOTE(WPN_SCYTHE),         \"20\", \"10\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnShaft@randomt\", \"shaft\",  \"scythe\",\n        QUOTE(WPN_TRIDENT),        \"10\", \" 8\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"shaft\",  \"trident\",\n        \"34\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"35\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"36\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"37\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"38\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"39\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_WHIP),          \"120\",  \"9\",  \"setWpnWhip@randomt\",  \"whip\",  \"setWpnShaft@randomt\", \"handle\", \"whip\",\n        \"41\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"42\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"43\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"44\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"45\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"46\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"47\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"48\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_LANCE),      \"240\",  \"40\",  \"setWpnLance@randomt\", \"pole\", \"setWpnHilt@randomt\",  \"hilt\",   \"lance\",  // 49 XXX TODO\n        \"50\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"51\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"52\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_CLAYMORE),      \"120\",  \"9\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"claymore\",  // 53\n        QUOTE(WPN_WAR_MAUL),       \"60\",  \"9\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"war maul//maul\",  // 54\n        \"55\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"56\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"57\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"58\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"59\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"60\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"61\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"62\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"63\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"64\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"65\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"66\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"67\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"68\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"69\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"70\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"71\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"72\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_MAIN_GAUCHE),    \"50\",  \"2\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"main gauche\", // 73\n        \"74\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"75\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_ADZE),           \"70\",  \"7\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnHilt@randomt\",  \"handle\", \"adze\",  // 76\n        \"77\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"78\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"79\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"80\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"81\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"82\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"83\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"84\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_JAVELIN),        \"10\",  \"6\",  \"setWpnHead@randomt\",  \"head\",  \"setWpnShaft@randomt\", \"shaft\",  \"javelin\", // 85\n        \"86\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"87\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"88\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"89\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"90\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"91\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"92\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"93\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"94\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"95\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        \"96\", \"\",\"\",\"\",\"\",\"\",\"\",\"\",\n        QUOTE(WPN_STILETTO),       \"40\",  \"1\",  \"setWpnSharp@randomt\", \"blade\", \"setWpnHilt@randomt\",  \"hilt\",   \"stiletto\", // 97\n        \"98\", \"\",\"\",\"\",\"\",\"\",\"\",\"\"\n        // ADD WPN_KNUCKLES <-- but it's kind of odd though, it's a separate skill\n    };\n\n    i := length(slWeapons)/8-1;\n\n    while (i >= 0)\n    {\n        if (atoi(slWeapons.[i*8]) != i)\n        {\n            log(\"RANDOM WEAPONS TABLE ERROR at index \" + itoa(i) + \" mismatch : \"+ slWeapons.[i*8]);\n        }\n        i := i - 1;\n    }\n\n    // Most common to least common weapon available for randomness, groups not included\n    ilWeapons := {\n        WPN_DAGGER,\n        WPN_CLUB,\n        WPN_SHORT_SWORD,\n        WPN_HAND_AXE,\n        WPN_ADZE,\n        WPN_BATTLE_CLUB,\n        WPN_MACE,\n        WPN_LONG_SWORD,\n        WPN_BROAD_SWORD,\n        WPN_QUARTERSTAFF,\n        WPN_SICKLE,\n        WPN_SPEAR,\n        WPN_JAVELIN,\n        WPN_TRIDENT,\n        WPN_SCIMITAR,\n        WPN_RAPIER,\n        WPN_STILETTO,\n        WPN_MAIN_GAUCHE,\n        WPN_FALCHION,\n        WPN_MORNING_STAR,\n        WPN_HALBERD,\n        WPN_BARDICHE,\n        WPN_WAR_MAUL,\n        WPN_BATTLE_MACE,\n        WPN_SCYTHE,\n        WPN_GREAT_SWORD,\n        WPN_BATTLE_AXE,\n        WPN_WAR_MATTOCK,\n        WPN_FLAIL,\n        WPN_LANCE,\n        WPN_CLAYMORE,\n        WPN_WHIP,\n        WPN_WAR_HAMMER // Thor's hammer\n    };\n\n\n    // Most common to least common martial arts weapon available for randomness, groups not included\n    ilMartial := {\n        WPN_FIST,\n        WPN_ELBOW,\n        WPN_KNEE,\n        WPN_KICK,\n        WPN_CLAW\n    };\n\n    // ADD A NEW SKILL BOOST TO UNARMED COMBAT (ilWeapons doesn't have e.g. WPN_FIST)\n\n    ilSkills := {        \n        SKI_APPRAISAL,\n        SKI_DIAGNOSTICS,\n        SKI_FLEE,\n        SKI_SWIMMING,\n        SKI_ARM_LEATHER,\n        SKI_CONSIDER,\n        SKI_TRACK,\n        SKI_COOK,\n        SKI_HUNT,\n        SKI_PLANT,\n        SKI_HERBS,\n        SKI_FORAGE,\n        SKI_BUTCHER,\n        SKI_SKIN,\n        SKI_ARM_HLEATHER,\n        SKI_CLIMB,\n        SKI_SHELTER,\n        SKI_RESIZE_CLOTHES,\n        SKI_CUFF,\n        SKI_WEATHER_WATCH,\n        SKI_KICK,\n        SKI_SEARCH,\n        SKI_VENTRILOQUATE,\n        SKI_RESIZE_LEATHER,\n        SKI_EVALUATE,\n        SKI_LAY_TRAP,\n        SKI_ARM_CHAIN,\n        SKI_TRIP,\n        SKI_PEEK,\n        SKI_LEADERSHIP,\n        SKI_SHIELD,\n        SKI_BASH,\n        SKI_FIRST_AID,\n        SKI_SNEAK,\n        SKI_RESCUE,\n        SKI_ARM_PLATE,\n        SKI_RESIZE_METAL,\n        SKI_HIDE,\n        SKI_DUAL_WIELD,\n        SKI_SCROLL_USE,\n        SKI_DISARM,\n        SKI_SOOTHE,\n        SKI_AMBUSH,\n        SKI_FASHION,\n        SKI_SHOOT,\n        SKI_DOWSE,\n        SKI_THROW,\n        SKI_SCAN,\n        SKI_SLIP,\n        SKI_PALM,\n        SKI_STALK,\n        SKI_KNEE,\n        SKI_ELBOW,\n        SKI_HIT,\n        // SKI_PUNCH, - not a skill\n        SKI_GLANCE,\n        SKI_FRENZY,\t\t\t\n        SKI_BERSERK,\t\t\n        SKI_RAGE,\n        SKI_TAUNT,\n        SKI_CHARGE,\n        SKI_LEAP,\n        SKI_DEFEND,\n        SKI_WHIRL,\n        SKI_CLEAVE,\n        SKI_REND,\n        SKI_SLAM,\n        SKI_WAND_USE,\n        SKI_TURN_UNDEAD,\n        SKI_PICK_LOCK,\n        SKI_BACKSTAB,\n        SKI_STEAL,\n        SKI_FILCH,\n        SKI_PICK_POCKETS,\n        SKI_CURARE\n    };\n\n\n    ilSpells := {\n        SPL_LIGHT_1,\n        SPL_IDENTIFY_1,\n        SPL_DARKNESS_1,\n        SPL_CURE_WOUNDS_1,\n        SPL_LOCATE_OBJECT,\n        SPL_CURE_BLIND,\n        SPL_REMOVE_CURSE,\n        SPL_REPEL_UNDEAD_1,\n        SPL_LAVA_1,\n        SPL_CAUSE_WOUNDS_1,\n        SPL_COLOURSPRAY_1,/*MIND*/\n        SPL_FIREBALL_1,/*HEAT*/\n        SPL_FROSTBALL_1,/*COLD*/\n        SPL_LIGHTNING_1,/*CELL*/\n        SPL_STINKING_CLOUD_1,/*INTERNAL*/\n        SPL_DISEASE_1,\n        SPL_ACIDBALL_1,/*EXTERNAL*/\n        SPL_DISPEL_EVIL,\n\n        SPL_BLESS,/*DIVINE*/\n        SPL_CURSE,\n        SPL_CURE_WOUNDS_2,\n        SPL_CAUSE_WOUNDS_2,\n        SPL_UNHOLY_WORD_2,\n        SPL_LAVA_2,\n        SPL_HOLY_WORD_2,\n        SPL_REPEL_UNDEAD_2,\n        SPL_FIREBALL_2,\n        SPL_FROSTBALL_2,\n        SPL_LIGHTNING_2,\n        SPL_STINKING_CLOUD_2,\n        SPL_DISEASE_2,\n        SPL_ACIDBALL_2,\n        SPL_IDENTIFY_2,\n        SPL_LIGHT_2,\n        SPL_DARKNESS_2,\n        SPL_COLOURSPRAY_2,\n\n        SPL_BLIND,\n        SPL_LOCATE_CHAR,\n        SPL_RAISE_MAG,/*PROTECTION*/\n        SPL_RAISE_DIV,\n        SPL_RAISE_STR,\n        SPL_RAISE_DEX,\n        SPL_RAISE_CON,\n        SPL_RAISE_CHA,\n        SPL_RAISE_BRA,\n        SPL_SUN_RAY,\n        SPL_DIVINE_RESIST,\n        SPL_RAISE_SUMMONING,\n        SPL_AWAKEN,\n        SPL_MIND_SHIELD,\n        SPL_HEAT_RESI,\n        SPL_COLD_RESI,\n        SPL_ELECTRICITY_RESI,\n        SPL_POISON_RESI,\n        SPL_ACID_RESI,\n        SPL_PRO_EVIL,\n        SPL_SANCTUARY,\n        SPL_DISPEL_MAGIC,\n        SPL_SUSTAIN,\n        SPL_LOCK,\n        SPL_UNLOCK,\n        SPL_DROWSE,\n        SPL_SLOW,\n        SPL_DUST_DEVIL,\n        SPL_DET_ALIGN,\n        SPL_DET_INVISIBLE,\n        SPL_DET_MAGIC,\n        SPL_DET_POISON,\n        SPL_DET_UNDEAD,\n        SPL_DET_CURSE,\n        SPL_SENSE_LIFE,\n        SPL_RANDOM_TELEPORT,\n        SPL_CLEAR_SKIES,\n        SPL_STORM_CALL,\n        SPL_WORD_OF_RECALL,\n        SPL_CONTROL_TELEPORT,\n        SPL_MINOR_GATE,\n        SPL_GATE,\n        SPL_CREATE_FOOD,\n        SPL_CREATE_WATER,\n        SPL_STUN,\n        SPL_HOLD,\n        SPL_ANIMATE_DEAD,\n        SPL_LEATHER_SKIN,\n        SPL_BARK_SKIN,\n        SPL_CONTROL_UNDEAD,\n        SPL_BONE_SKIN,\n        SPL_STONE_SKIN,\n        SPL_AID,\n        SPL_INVISIBILITY,\n        SPL_WIZARD_EYE,\n        SPL_FEAR,\n        SPL_CONFUSION,\n        SPL_SLEEP,\n        SPL_XRAY_VISION,\n        SPL_CALM,\n        SPL_SUMMER_RAIN,\n        SPL_COMMAND,\n        SPL_LEAVING,\n        SPL_POISON,\n        SPL_REMOVE_POISON,\n        SPL_ENERGY_DRAIN,\n        SPL_REM_DISEASE,\n        SPL_LEAF_SHIELD,\n        SPL_FIND_PATH,/*Divine*/\n        SPL_DISPEL_GOOD,\n        SPL_PRO_GOOD,\n        SPL_TRANSPORT,\n        // MONSTER SPELL SPL_FIRE_BREATH,\n        // MONSTER SPELL SPL_FROST_BREATH,\n        // MONSTER SPELL SPL_LIGHTNING_BREATH,\n        // MONSTER SPELL SPL_ACID_BREATH,\n        // MONSTER SPELL SPL_GAS_BREATH,\n        // MONSTER SPELL SPL_LIGHT_BREATH,\n        SPL_HOLD_MONSTER,\n        SPL_HOLD_UNDEAD,\n        SPL_TOTAL_RECALL,\n        SPL_UNDEAD_DOOR,\n        SPL_LIFE_PROTECTION,\n        SPL_ENERGY_BOLT,\n        SPL_CLENCHED_FIST,\n        SPL_METEOR_SHOWER,\n        SPL_SUN_BEAM,\n        SPL_SOLAR_FLARE,\n        SPL_SUMMON_DEVIL,\n        SPL_SUMMON_DEMON,\n        SPL_SUMMON_FIRE,\n        SPL_SUMMON_WATER,\n        SPL_SUMMON_AIR,\n        SPL_SUMMON_EARTH,\n        SPL_CHARGE_WAND,\n        SPL_CHARGE_STAFF,\n        SPL_MENDING,\n        SPL_REPAIR,\n        SPL_RECONSTRUCT,\n        SPL_SENDING,\n        SPL_REFIT,\n        SPL_FIND_WANTED,\n        SPL_LOCATE_WANTED,\n        SPL_STORM_GATE,\n        SPL_SUN_GLOBE,\n        SPL_MAGIC_CANDLE,\n        SPL_SONIC_BREATH,\n        SPL_SHARD_BREATH,\n        SPL_CONE_SHARD,\n        SPL_SACRED,\n        SPL_CAUSE_INSTABILITY,\n        SPL_CAUSE_FLIGHT,\n        SPL_SLOW_ROT,\n        SPL_HAMMER_HAND,\n        SPL_CAUSE_PANIC,\n        SPL_BANISH,\n        SPL_HOLD_FLIGHT,\n        SPL_BLINDING_FLASH,\n        SPL_BLIZZARD,\n        SPL_SUMMON_ANIMAL,\n        SPL_HEAL_ANIMAL,\n        SPL_HOLD_ANIMAL,\n        SPL_CHARM_ANIMAL,\n        SPL_LOCATE_ANIMAL,\n        SPL_ENTANGLE,\n        SPL_REFRESH,\n        SPL_TIGER_CLAW,\n        SPL_EAGLE_CRY,\n        SPL_GROUP_TELEPORT,\n        SPL_RAISE_HPP,\n        // MONSTER SPELL SPL_SOUL_SHIFT,\n        SPL_AID_UNDEAD,\n        SPL_HOLY_WORD,\n        SPL_UNHOLY_WORD,\n        SPL_FINAL_REST,\n        SPL_RAISE_SKELETON,\n        SPL_RAISE_CHAMPION,\n        SPL_RAISE_HORDE,\n        SPL_PORTAL,\n        SPL_TRAVEL,\n        SPL_GLOW_FUNGUS,\n        SPL_SEN_INVISIBLE,\n        SPL_MANA_BOOST,\n        SPL_TSUNAMI,\n        SPL_QUICKSAND,\n        SPL_HEDGE_WALL,\n        SPL_POISON_IVY,\n        SPL_THORN_STRIKE,\n        SPL_WIND_SLASH,\n        SPL_PETRIFY,\n        SPL_MUD_PUDDLE,\n        SPL_EARTH_QUAKE,\n        SPL_BRAMBLES,\n        SPL_POLARITY,\n        SPL_MIRE,\n        SPL_NIGHT_GLOBE,\n        SPL_UBLESS,\t\t\n        SPL_SUMMON_LIGHT,\n        SPL_ICE_THORN,\n        SPL_WIZARD_MARK,\n        SPL_FOCUS,\n        SPL_CONDEMN,\n        SPL_DISPLACE_MAGIC,\n        SPL_QUICKEN,\n\n        SPL_ACIDBALL_3,\n        SPL_STINKING_CLOUD_3,\n        SPL_HOLY_WORD_3,\n        SPL_UNHOLY_WORD_3,\n        SPL_CURE_WOUNDS_3,\n        SPL_CAUSE_WOUNDS_3,\n        SPL_COLOURSPRAY_3,\n        SPL_FIREBALL_3,\n        SPL_FROSTBALL_3,\n        SPL_LIGHTNING_3,\n        SPL_LAVA_3,\n\n        SPL_RAISE_DEAD,\n        SPL_RESURRECTION,\n        SPL_CALL_LIGHTNING,/*CellGroup*/\n        SPL_HASTE,\n\n        SPL_HOLY_WORD_4,\n        SPL_UNHOLY_WORD_4,\n        SPL_LAVA_4,\n        SPL_FIREBALL_4,/*HEAT*/\n        SPL_FROSTBALL_4,/*COLD*/\n        SPL_LIGHTNING_4,/*CELL*/\n        SPL_ACIDBALL_4,/*EXTERNAL*/\n        SPL_COLOURSPRAY_4,/*MIND*/\n        SPL_STINKING_CLOUD_4,/*INTERNAL*/\n        SPL_CAUSE_WOUNDS_4 /*DIVINE*/\n    };\n\n    // Auto-generated from EXCEL (Git)\n    slMatNames :=\n    {\n        \"tin\",\n        \"lead\",\n        \"copper\",\n        \"bronze\",\n        \"brass\",\n        \"zinc\",\n        \"iron\",\n        \"dark iron\",\n        \"steel\",\n        \"silver\",\n        \"high steel\",\n        \"gold\",\n        \"black steel\",\n        \"adamantium\",\n        \"platinum\",\n        \"titanium\",\n        \"eog\",\n        \"ithilnaur\",\n        \"mithril\",\n        \"bamboo\",\n        \"pine, yellow\",\n        \"ash\",\n        \"birch\",\n        \"walnut\",\n        \"maple\",\n        \"oak\",\n        \"willow\",\n        \"hickory\",\n        \"mahogany\",\n        \"teak\",\n        \"ipe\",\n        \"black oak\",\n        \"dark wood\",\n        \"mallorn\",\n        \"ente wood\",\n        \"sandstone\",\n        \"flint\",\n        \"granite\",\n        \"malachite\",\n        \"amethyst\",\n        \"amber\",\n        \"marble\",\n        \"obsidian\",\n        \"moonstone\",\n        \"pearl\",\n        \"onyx\",\n        \"emerald\",\n        \"sapphire\",\n        \"ruby\",\n        \"diamond\",\n        \"slime\",\n        \"cloth\",\n        \"leather\",\n        \"hard leather\",\n        \"shark hide\",\n        \"elephant hide\",\n        \"chimera hide\",\n        \"griffon hide\",\n        \"basilisk hide\",\n        \"drake hide\",\n        \"wyvern hide\",\n        \"dragon hide\",\n        \"rubber\",\n        \"bone\",\n        \"ivory\",\n        \"dragon bone\",\n        \"dragon scale\"\n    };\n\n    // Auto-generated from EXCEL (Git)\n    ilMatValues := {\n        MAT_TIN,1,93,10000,\n        MAT_LEAD,1,145,10000,\n        MAT_COPPER,1,114,60000,\n        MAT_BRONZE,1,112,70000,\n        MAT_BRASS,1,108,70000,\n        MAT_ZINC,1,91,10000,\n        MAT_IRON,1,100,100000,\n        MAT_DARK_IRON,1,101,120000,\n        MAT_STEEL,1,102,150000,\n        MAT_SILVER,1,132,60000,\n        MAT_HIGH_STEEL,1,96,170000,\n        MAT_GOLD,1,246,20000,\n        MAT_BLACK_STEEL,1,89,190000,\n        MAT_ADAMANTIUM,1,77,220000,\n        MAT_PLATINUM,1,273,60000,\n        MAT_TITANIUM,1,57,200000,\n        MAT_EOG,1,70,200000,\n        MAT_ITHILNAUR,1,61,290000,\n        MAT_MITHRIL,1,49,400000,\n        MAT_BAMBOO,2,5,4000,\n        MAT_PINE,2,5,5000,\n        MAT_ASH,2,8,7000,\n        MAT_BIRCH,2,8,7000,\n        MAT_WALNUT,2,7,10000,\n        MAT_MAPLE,2,9,10000,\n        MAT_OAK,2,10,10000,\n        MAT_WILLOW,2,6,10000,\n        MAT_HICKORY,2,10,10000,\n        MAT_MAHOGANY,2,10,10000,\n        MAT_TEAK,2,12,10000,\n        MAT_IPE,2,15,20000,\n        MAT_BLACK_OAK,2,11,60000,\n        MAT_DARK_WOOD,2,16,80000,\n        MAT_MALLORN,2,9,100000,\n        MAT_ENTE_WOOD,2,6,140000,\n        MAT_SANDSTONE,3,29,50000,\n        MAT_FLINT,3,33,70000,\n        MAT_GRANITE,3,35,100000,\n        MAT_MALACHITE,3,51,80000,\n        MAT_AMETHYST,3,23,80000,\n        MAT_AMBER,3,14,80000,\n        MAT_MARBLE,3,35,80000,\n        MAT_OBSIDIAN,3,30,80000,\n        MAT_MOONSTONE,3,23,80000,\n        MAT_PEARL,3,14,20000,\n        MAT_ONYX,3,23,80000,\n        MAT_EMERALD,3,36,80000,\n        MAT_SAPPHIRE,3,36,80000,\n        MAT_RUBY,3,36,80000,\n        MAT_DIAMOND,3,45,80000,\n        MAT_SLIME,4,13,80000,\n        MAT_CLOTH,4,6,20000,\n        MAT_LEATHER,4,11,40000,\n        MAT_HARD_LEATHER,4,12,60000,\n        MAT_SHARK_HIDE,4,11,80000,\n        MAT_ELEPHANT_HIDE,4,12,70000,\n        MAT_CHIMERA_HIDE,4,11,77500,\n        MAT_GRIFFON_HIDE,4,11,85000,\n        MAT_BASILISK_HIDE,4,10,90000,\n        MAT_DRAKE_HIDE,4,10,110000,\n        MAT_WYVERN_HIDE,4,10,120000,\n        MAT_DRAGON_HIDE,4,9,150000,\n        MAT_RUBBER,4,15,80000,\n        MAT_BONE,4,26,40000,\n        MAT_IVORY,4,25,70000,\n        MAT_DRAGON_BONE,4,15,280000,\n        MAT_DRAGON_SCALE,4,18,300000\n    };\n\n\n    quit;\n} dilend"
}