{
    "keyword": "lifespan",
    "opcode": "DILSF_LSA",
    "yacc_rule": "| DILSF_LSA /* .lifespan */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_LFT;\n    $$.num = DILF_LSA;\n}",
    "dilfe_name": "DILF_LSA",
    "c_implementation": "case DILF_LSA:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                {\n                    auto *pc = reinterpret_cast<pc_data *>(v1->val.ptr);\n                    if (pc && pc->isPC())\n                    {\n                        v->atyp = DILA_NONE;\n\n                        if (p->frame[0].tmpl->zone->getAccessLevel() != 0)\n                        {\n                            v->type = DILV_INT;\n                            v->val.num = pc->getLifespan();\n                        }\n                        else\n                        {\n                            v->type = DILV_UINT2R;\n                            v->ref = pc->getLifespanPtr();\n                        }\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                }\n                break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin integer hit_l_num(pc:unitptr,point:integer);\ncode\n{\n    if (pc.type==UNIT_ST_PC)\n    {\n        if (((realtime-pc.birth)/SECS_PER_MUD_YEAR)>pc.lifespan)\n            return (-1);\n        return (3*point+20);\n    }\n    else\n        return (3*point+10);\n} dilend"
}