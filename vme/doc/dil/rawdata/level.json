{
    "keyword": "level",
    "opcode": "DILSF_LVL",
    "yacc_rule": "| DILSF_LVL /* .level */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UCP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_LFT;\n    $$.num = DILF_LVL;\n}",
    "dilfe_name": "DILF_LVL",
    "c_implementation": "case DILF_LVL:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                {\n                    auto *character = reinterpret_cast<char_data *>(v1->val.ptr);\n                    if (character && character->isChar())\n                    {\n                        if (character->isPC() && (p->frame[0].tmpl->zone->getAccessLevel() != 0))\n                        {\n                            v->type = DILV_INT;\n                            v->val.num = CHAR_LEVEL(character);\n                        }\n                        else\n                        {\n                            v->type = DILV_UINT1R;\n                            v->ref = character->getLevelPtr();\n                        }\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                }\n                break;\n\n                case DILV_CP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NONE;\n                        v->type = DILV_INT;\n                        v->val.num = (((command_info *)v1->val.ptr)->minimum_level);\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                    break;\n\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin bums_only();\nvar\n\titem : unitptr;\n\tpc   : unitptr;\ncode\n{\n   :start:\n\twait(SFB_PRE, command(\"get\"));\n\titem := target;\n\tpc := activator;\n\n\tif (target.outside == self)\n   {\n\t\tif(((item.objecttype == ITEM_FOOD) or (item.objecttype == ITEM_DRINKCON)) and (pc.level > 20))\n      {\n\t\t\tact(\"Your can't bring yourself to take from the needy.\",\n\t\t\t\tA_ALWAYS, pc, null, null, TO_CHAR);\n\t\t\texec(\"drop \"+item.name, pc);\n      }\n   }\n\tgoto start;\n} dilend"
}