{
    "keyword": "speed",
    "opcode": "DILSF_SPD",
    "yacc_rule": "| DILSF_SPD /* .speed */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UCP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_DYN;\n    $$.num = DILF_SPD;\n}",
    "dilfe_name": "DILF_SPD",
    "c_implementation": "case DILF_SPD:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL:\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                    if ((v1->val.ptr && ((unit_data *)v1->val.ptr)->isChar()))\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_INT;\n                        v->val.num = CHAR_SPEED((unit_data *)v1->val.ptr);\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                    break;\n                case DILV_CP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_INT;\n                        v->val.num = (((command_info *)v1->val.ptr)->combat_speed);\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                    break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin newProfQuest();\nexternal\n   Explainer@quests(pc : unitptr, sl : stringlist);\n   unitptr qstWaitHero@quests(qname : string, pc : unitptr, sl : stringlist, acptfunc : string, prereqfunc : string);\n   extraptr qstAssign@quests(qname : string, pc : unitptr, sl : stringlist, qdescr : string);\n   unitptr qstWaitDone@quests(qname : string, pc : unitptr,\n                             sl : stringlist, xp : integer, gold : integer, itemsl : stringlist);\n   extraptr qstSetOngoing@quests(qname : string, pc : unitptr, qdescr : string);\n\nvar\n   pc : unitptr;\n   exdp : extraptr;\n   s : string;\ncode\n{\n   heartbeat := PULSE_SEC*4;\n\n:start:\n   wait(SFB_CMD, (activator.type == UNIT_ST_PC));\n\n   if (activator.level < 50)\n      goto start;\n\n\tpc := qstWaitHero@quests(NICHOLAS_QUEST, activator,\n      {\"::Father Nicholas looks at you.::\",\n      \"think\",\n      \"say $1N, I think you're finally ready. I can see you've learned a lot.\",\n      \"say Only once in a lifetime can one consider treading a new path.\",\n      \"say I did so myself. When I was a young man, I was a warrior and then only later did I become a man of the Gods.\",\n      \"whisper $1N If you want to consider treading a new path just <a cmd='#'>nod</a> your head, and I'll give you the details.\"\n      }, \"\", \"\"\n   );\n\n   if (pc == null)\n      goto start;\n\n   secure(pc, lostpc);\n\n   Explainer@quests(pc, \n      {\"say Well first let us see if you have learned enough.\",\n       \"say Ready for the first question?\",\n       \"say Here we go...\",\n       \"emote one eye seems to grow larger.\",\n       \"say $1n, what is your favorite color?\"});\n\n:q1:\n   wait(SFB_CMD, activator == pc);\n   if (command(\"say\") or command(\"tell\") or command(\"whisper\"))\n   {\n      pause;\n      Explainer@quests(pc, \n         {\"say But are you sure that is your final answer?\",\n         \"::$3n looks at you intensely.::$3n looks intensely at $1n.\"});\n   }\n   else\n      goto q1;\n\n:q2:\n   wait(SFB_CMD, activator == pc);\n   if (command(\"say\") or command(\"tell\") or command(\"whisper\") or command(\"nod\") or command(\"shake\"))\n   {\n      pause;\n      exec(\"grunt\", self);\n   }\n   else\n      goto q2;\n\n   s := pc.name;\n   Explainer@quests(pc, \n      {\"point $1N\",\n      \"::Suddenly you're lifted up in the air at great speed. You scream at the top of your lungs.::$1n screams as $1e is lifted up into the air at great speed and vanishes.\"});\n\n   unsecure(pc);\n   exdp := qstSetOngoing@quests(NICHOLAS_QUEST, pc, \"Seek out a grocer in Xiyang City, buy a shrubbery and bring it back to father Nicholas in Udgaard.\");\n   link(pc, findsymbolic(\"ship_hire@xiyang2\"));\n   exec(\"tell \"+s+\" seek out a grocer in Xiyang City and bring me a small shrubbery with white leaves.\", self);\n   heartbeat := PULSE_SEC;\n\n   // Make the shrubbery break if you teleport. You need to sail back.\n   goto start;\n\n:lostpc:\n   exec(\"sigh\", self);\n   goto start;\n} dilend"
}