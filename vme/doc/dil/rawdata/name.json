{
    "keyword": "name",
    "opcode": "DILSF_NAM",
    "yacc_rule": "| DILSF_NAM /* .name */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UEZCP;\n    $$.typ = DilVarType_e::DILV_SP;\n    $$.dsl = DSL_DYN;\n    $$.num = DILF_NAM;\n}",
    "dilfe_name": "DILF_NAM",
    "c_implementation": "case DILF_NAM:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n\n                case DILV_EDP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_SP;\n                        if (v1->val.ptr)\n                        {\n                            v->val.ptr = (void *)IF_STR(((extra_descr_data *)v1->val.ptr)->names.Name());\n                        }\n                        else\n                        {\n                            v->val.ptr = (void *)\"\"; // MS2020 SPOOKY? IS THIS RIGHT?IF_STR returns \"\"\n                        }\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                    break;\n\n                case DILV_UP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_SP;\n                        v->val.ptr = (void *)IF_STR(((unit_data *)v1->val.ptr)->getNames().Name());\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                    break;\n                case DILV_ZP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_SP;\n                        v->val.ptr = (void *)((zone_type *)v1->val.ptr)->getName().c_str();\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                    break;\n                case DILV_CP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_SP;\n                        v->val.ptr = (void *)IF_STR(((command_info *)v1->val.ptr)->cmd_str);\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                    break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin cuff_target(deputy : unitptr, targ : unitptr, cuffs : unitptr);\nvar\n   depname: string;\n\ncode\n{\n   act(\"You cuff $3n.\", A_SOMEONE, deputy, null, targ, TO_CHAR);\n   act(\"$1n surprises you and put $2n around your wrists.\", A_SOMEONE, deputy, cuffs, targ, TO_VICT);\n   act(\"$1n puts $2n around $3N's wrists.\", A_SOMEONE, deputy, cuffs, targ, TO_NOTVICT);\n\n   follow(targ, deputy);\n   depname := deputy.name;\n   link(cuffs, targ);\n   unequip(equipment(targ, WEAR_WRIST_R));\n   addequip(cuffs, WEAR_WRIST_R);\n   dilcopy(\"cuffed@midgaard(\"+depname+\")\", targ);\n   dilcopy(\"cuffed2@midgaard(\"+depname+\")\", targ);\n\n   exec(\"sigh\", targ); /* Do this to activate the DILs */\n   return;\n} dilend"
}