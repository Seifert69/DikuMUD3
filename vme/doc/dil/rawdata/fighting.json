{
    "keyword": "fighting",
    "opcode": "DILSF_FGT",
    "yacc_rule": "| DILSF_FGT /* .fighting */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UP;\n    $$.typ = DilVarType_e::DILV_UP;\n    $$.dsl = DSL_DYN;\n    $$.num = DILF_FGT;\n}",
    "dilfe_name": "DILF_FGT",
    "c_implementation": "case DILF_FGT:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                    if (v1->val.ptr && ((unit_data *)v1->val.ptr)->isChar())\n                    {\n                        v->atyp = DILA_NONE;\n                        v->type = DILV_UP;\n                        v->val.ptr = CHAR_FIGHTING((unit_data *)v1->val.ptr);\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                    break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin intercept_kill(uid : integer);\nexternal\n  collect@udgaard();\n\nvar\n   tmpid : integer;\n   i     : integer;\n\ncode\n{\n   heartbeat := PULSE_SEC * 3;\n\n   :loop:\n   wait(SFB_DEAD, activator == self.fighting);\n   tmpid := activator.idx;\n\n   if (tmpid == uid)\n   {\n      i := dildestroy(\"hunt@udgaard\", self);\n      i := dildestroy(\"checkaround@udgaard\", self);\n      i := dildestroy(\"inter_target@udgaard\", self);\n   }\n  pause;\n  exec(\"decap corpse\", self);\n  exec (\"follow al\",self);\n  pause;\n  exec(\"cackle\",self);\n  exec(\"take all from corpse\", self);\n  pause;\n  exec(\"shout Valhalla is a much safer place! I bagged another outlaw!\", self);\n\n   if (tmpid == uid)\n   {\n      collect@udgaard();\n      quit;\n   }\n\n   goto loop;\n} dilend"
}