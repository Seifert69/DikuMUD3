{
    "keyword": "resettime",
    "opcode": "DILSF_RSTTM",
    "yacc_rule": "| DILSF_RSTTM\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_ZP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_DYN;\n    $$.num = DILF_RSTTM;\n}",
    "dilfe_name": "DILF_RSTTM",
    "c_implementation": "case DILF_RSTTM:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_ZP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NONE;\n                        v->type = DILV_UINT2R;\n                        v->ref = ((zone_type *)v1->val.ptr)->getZoneResetTimePtr();\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                    break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin secret_wipe(dir : integer);\nexternal\n   string  dirstring@spells(i1 : integer);\n\nvar\n   ext   :  extraptr;\n   zon   :  zoneptr;\n   door  :  string;\n\ncode\n{\n   zon := zhead();\n\n   while(zon.name != self.zone)\n      zon := zon.next;\n\n   if (zon.name != self.zone)\n   {\n      log(\"SECRET DOOR ERROR: \" + self.nameidx + \"@\" + self.zoneidx + \" somehow isnt in a zone.\");\n      return;\n   }\n\n   /* Set the ticker to the zone's reset time */\n   heartbeat :=  zon.resettime * 60 * PULSE_SEC;\n\n   :start:\n   wait(SFB_TICK, TRUE);\n\n   door := SECRET_DOOR+itoa(dir); \n   ext :=  door in self.extra;\n\n   /* If no SECRET_DOOR extras at all, there is an error */\n   if (ext == null)\n   {\n      log(\"SECRET DOOR ERROR: \" + self.nameidx + \"@\" + self.zoneidx + \" has secret_wipe() but no secret doors.\");\n      return;\n   }\n\n\n   /* Clear the extra of all pc's that have found the secret door  */\n   while(length(ext.names) > 1)\n      substring(ext.names, ext.names.[1]);\n\n   goto start;\n} dilend"
}