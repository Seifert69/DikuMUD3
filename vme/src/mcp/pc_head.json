{
    "keyword": "pc_head",
    "opcode": "DILSE_PHEAD",
    "yacc_rule": "| DILSE_PHEAD '(' ')'\n{\n    INITEXP($$);\n    $$.dsl = DSL_DYN;\n    $$.typ = DilVarType_e::DILV_UP;\n    add_ubit8(&($$), DILE_PHEAD);\n}",
    "dilfe_name": "dilfe_phead",
    "c_implementation": "void dilfe_phead(dilprg *p)\n{\n    dilval *v = new dilval;\n    if (g_unit_list->isPC())\n    {\n        v->atyp = DILA_NORM;\n        v->type = DILV_UP;\n        v->val.ptr = g_unit_list;\n    }\n    else\n    {\n        v->type = DILV_NULL;\n    }\n    p->stack.push(v);\n}",
    "dil_example": "dilbegin force(arg:string);\nvar\n u:unitptr;\n all_arg:string;\ncode\n{\n\nif (self.type!=UNIT_ST_PC)\n\tquit;\n\n u:=findunit(self,arg,FIND_UNIT_GLOBAL,null,UNIT_ST_PC);\nif (u==null)\n u:=findunit(self,arg,FIND_UNIT_HERE,null,UNIT_ST_NPC);\nif (u==null)\n u:=findunit(self,arg,FIND_UNIT_ZONE,null,UNIT_ST_NPC);\nif (u==null)\n u:=findunit(self,arg,FIND_UNIT_WORLD,null,UNIT_ST_NPC);\n\nif (u==null)\n {\nall_arg:=getword(arg);\nif (all_arg==\"all\")\n  goto force_all;\n  sendtext(\"Who would you like to force to do what?<br/>\",self);\n  quit;\n  }\n\n  :force_one:\nif (self.level < u.level)\n{\nif (visible(self,u))\nact(\"You can't force $3n to do that.\",\nA_ALWAYS,self,null,u,TO_CHAR);\nelse\nsendtext(\"Who would you like to force to do what?<br/>\",self);\nquit;\n}\n\n  act (\"Forcing $3n to '$2t'\",\n  A_ALWAYS,self,arg,u,TO_CHAR);\nact(\"$1n has forced you to '$2t'\",\nA_SOMEONE,self,arg,u,TO_VICT);\n\nexec (arg,u);\nsendtext(\"Done<br/>\",self);\nquit;\n\n:force_all:\nu:=pc_head();\nwhile (u.type==UNIT_ST_PC)\n{\nif (u==self)\n {\n u:=u.gnext;\n continue;\n }\nif (self.level > u.level)\n{\nact(\"$1n has forced you to '$2t'\",\nA_SOMEONE,self,arg,u,TO_VICT);\n\n \texec (arg,u);\n}\n else if (visible(self,u))\n act(\"You can't force $3n to do that.\",\n A_ALWAYS,self,null,u,TO_CHAR);\n\n u:=u.gnext;\n }\nsendtext(\"Done<br/>\",self);\n quit;\n } dilend"
}