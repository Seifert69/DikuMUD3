= npcs =

== Syntax ==
 function: unitptr '''npcs'''(zone : zoneptr);

== Description ==
The '''npcs''' function returns a pointer to the first NPC (Non-Player Character) in the specified zone. This function provides access to the NPC hierarchy within zones, allowing DIL programs to locate and work with specific NPCs for administrative purposes, quest systems, or zone management operations.

== Parameters ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| zone || zoneptr || Zone pointer to search for NPCs
|}

== Return Value ==
Returns '''unitptr''':
* '''unitptr''' - Pointer to the first NPC found in the specified zone
* '''null''' - If no NPCs exist in the zone or zone pointer is invalid

== Examples ==
 dilbegin zone_npc_manager();
 var
    target_zone : zoneptr;
    first_npc : unitptr;
    npc_count : integer;
 code
 {
    // Get the admin zone for NPC management
    target_zone := findroom("admin_zone@midgaard");
    
    if (target_zone != null)
    {
       // Get the first NPC in the zone
       first_npc := npcs(target_zone);
       
       if (first_npc != null)
    {
          exec("say First NPC found: " + first_npc.name, self);
          exec("say NPC Zone: " + target_zone.name, self);
       }
       else
       {
          exec("say No NPCs found in admin zone.", self);
       }
    }
    else
    {
       exec("say Admin zone not found.", self);
    }
 } dilend

 dilbegin npc_patrol_system();
 var
    current_zone : zoneptr;
    patrol_npc : unitptr;
    npc_index : integer;
 code
 {
    // Get the city zone for patrol NPCs
    current_zone := findroom("city_zone@midgaard");
    
    if (current_zone != null)
    {
       // Find all patrol NPCs in the zone
       npc_index := 0;
       patrol_npc := npcs(current_zone);
       
       while (patrol_npc != null)
       {
          npc_index := npc_index + 1;
          exec("say Patrol NPC " + itoa(npc_index) + ": " + patrol_npc.name, self);
          
          // Move to next NPC
          patrol_npc := npcs(patrol_npc);
       }
       
       exec("say Found " + itoa(npc_index) + " patrol NPCs in " + current_zone.name, self);
    }
    else
    {
       exec("say City zone not found.", self);
    }
 } dilend

 dilbegin npc_counter();
 var
    target_zone : zoneptr;
    total_npcs : integer;
 code
 {
    // Count NPCs in a specific zone
    target_zone := findroom("monster_zone@midgaard");
    
    if (target_zone != null)
    {
       total_npcs := npccount(target_zone);
       
       exec("say Total NPCs in monster zone: " + itoa(total_npcs), self);
    }
    else
    {
       exec("say Monster zone not found.", self);
    }
 } dilend

== Usage Notes ==
* The '''npcs''' function requires a valid zone pointer parameter
* Used for administrative NPC management and zone population monitoring
* Returns the first NPC found in the zone's NPC list
* The returned NPC can be used with standard NPC functions and fields
* Common use cases include:
** Zone administration and NPC management
** Patrol system coordination
** Population monitoring and statistics

== Error Handling ==
* Returns '''null''' if:
** Zone pointer is null or invalid
** No NPCs exist in the specified zone
* Zone pointer does not point to a valid zone

== Related Functions/Fields ==
* [[npccount]] - Count NPCs in a zone
* [[findroom]] - Find a specific zone by name
* [[npcflags]] - Modify NPC behavior flags
* [[npc_head]] - Get first NPC in global list
* [[zoneptr]] - Zone pointer type and fields
* Zone management functions: [[store]], [[restore]]

== See Also ==
* Zone pointer fields: '''name''', '''zoneidx''', '''npcs''', '''rooms''', '''objs'''
* NPC type constants: '''UNIT_ST_NPC'''
* Administrative zone building and management