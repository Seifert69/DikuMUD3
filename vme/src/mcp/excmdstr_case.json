{
    "keyword": "excmdstr_case",
    "opcode": "DILSE_EXCMSTC",
    "yacc_rule": "| DILSE_EXCMSTC\n{\n    INITEXP($$);\n    $$.dsl = DSL_DYN;\n    $$.typ = DilVarType_e::DILV_SP;\n    add_ubit8(&($$), DILE_EXCMSTC);\n}",
    "dilfe_name": "dilfe_excmstc",
    "c_implementation": "void dilfe_excmstc(dilprg *p)\n{\n    dilval *v = new dilval;\n    /* excmdc */\n\n    v->type = DILV_SP;\n    v->atyp = DILA_NORM;\n\n    if (p->sarg->cmd->excmdc)\n    {\n        v->val.ptr = (char *)p->sarg->cmd->excmdc;\n    }\n    else\n    {\n        v->type = DILV_NULL;\n        v->val.ptr = nullptr;\n    }\n    p->stack.push(v);\n}",
    "dil_example": "dilbegin aware do_password(arg:string);\nvar\n   prmt:string;\n   firstpwd:string;\n   i:integer;\n   tlist:stringlist;\n\ncode\n{\n   if (excmdstr != \"password\")\n   {\n      sendtext (\"You must type 'password', no less to be able to set your password!<br/>\",self);\n      quit;\n   }\n\n   if (self.type != UNIT_ST_PC)\n      quit;\n\n   arg:=\"\";\n   prmt:=self.prompt;\n   self.prompt:=\"Enter new password:  \";\n   i:=dildestroy(\"send_prompt@update\",self);\n   dilcopy(\"send_prompt@update\",self);\n\n   wait(SFB_CMD, self==activator);\n   block;\n   tlist := getwords (excmdstr_case);\n\n   if (length(tlist) > 1)\n   {\n      sendtext (\"Password must be only one word.  Try again.<br/>\",self);\n      self.prompt:=prmt;\n      i:=dildestroy(\"send_prompt@update\",self);\n      dilcopy(\"send_prompt@update\",self);\n      quit;\n   }\n\n   if (length(excmdstr_case) < 5)\n   {\n      sendtext (\"Password to short. Password must be 5 characters or longer.  Try again.<br/>\",self);\n      self.prompt:=prmt;\n      i:=dildestroy(\"send_prompt@update\",self);\n      dilcopy(\"send_prompt@update\",self);\n      quit;\n   }\n\n   if (length(excmdstr_case) > 16)\n   {\n      sendtext (\"Password to long. Try again.<br/>\",self);\n      self.prompt:=prmt;\n      i:=dildestroy(\"send_prompt@update\",self);\n      dilcopy (\"send_prompt@update\",self);\n      quit;\n   }\n\n\tfirstpwd:=excmdstr_case;\n\tself.prompt:=\"Enter password again:  \";\n\n   wait (SFB_CMD,self==activator);\n   block;\n\n   if (strcmp(excmdstr_case,firstpwd)!=0)\n   {\n      sendtext (\"Passwords do not match try again.<br/>\",self);\n      self.prompt:=prmt;\n      i:=dildestroy(\"send_prompt@update\",self);\n      dilcopy (\"send_prompt@update\",self);\n      quit;\n   }\n\n   set_password(self,excmdstr_case);\n   sendtext (\"Password Changed.<br/>\",self);\n   self.prompt:=prmt;\n   i:=dildestroy(\"send_prompt@update\",self);\n   dilcopy(\"send_prompt@update\",self);\n   quit;\n} dilend"
}