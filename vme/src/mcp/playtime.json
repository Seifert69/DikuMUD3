{
    "keyword": "playtime",
    "opcode": "DILSF_PTI",
    "yacc_rule": "| DILSF_PTI /* .playtime */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_DYN;\n    $$.num = DILF_PTI;\n}",
    "dilfe_name": "DILF_PTI",
    "c_implementation": "case DILF_PTI:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                {\n                    auto *player = reinterpret_cast<pc_data *>(v1->val.ptr);\n                    if (player && player->isPC())\n                    {\n                        v->atyp = DILA_NONE;\n                        v->type = DILV_INT;\n                        v->val.num = player->getPCTimeInformation().getTotalTimePlayedInSeconds();\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                }\n                break;\n\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin string playingstring();\nvar\n   tf:integer;\n   tmp_played:integer;\n   hours_played : integer;\n   days_played  : integer;\n   years_played  : integer;\n   time_str:string;\n\ncode\n{\n   tmp_played:=0;\n   tmp_played:= self.playtime / 3600;\n   hours_played:= tmp_played % 24;\n   days_played:=((tmp_played/24)%365);\n   years_played:=((tmp_played/24)/365);\n\n   tf:=FALSE;\n   time_str:=\"You have been playing for\";\n\n   if (years_played >0)\n   {\n      time_str:=time_str+\" \"+ itoa(years_played)+\" years\";\n      tf:=TRUE;\n   }\n\n   if ((days_played>0) and (tf==TRUE))\n   {\n      time_str:=time_str+\", \"+itoa(days_played)+\" days\";\n   }\n   else if (days_played>0)\n   {\n      time_str:=time_str+\" \"+itoa(days_played)+\" days\";\n      tf:=TRUE;\n   }\n\n   if ((hours_played>0) and (tf==TRUE))\n   {\n      time_str:=time_str+\", \"+itoa(hours_played)+\" hours\";\n   }\n   else if (hours_played>0)\n   {\n      time_str:=time_str+\", and \"+itoa(hours_played)+\" hours\";\n      tf:=TRUE;\n   }\n\n   if (tf!=TRUE)\n      time_str:=time_str+\" less than an hour.<br/>\";\n   else\n      time_str:=time_str+\".<br/>\";\n\n   return(time_str);\n} dilend"
}