= unitptr =

 type: '''unitptr'''

Pointer type that references units in the DikuMUD3 system.

== Description ==
The '''unitptr''' type is a pointer type that can reference any unit in the game world, including player characters (PCs), non-player characters (NPCs), objects, or rooms. This type is fundamental to DIL programming as it allows programs to interact with and manipulate any unit in the game world.

The '''unitptr''' type is used throughout DIL to:
* Reference specific units for actions, combat, or interactions
* Store unit references for later use
* Pass units as parameters to functions
* Check unit types and properties before performing operations
* Navigate unit hierarchies (inside/outside relationships)
* Access unit fields and properties for reading or modification

== Examples ==
=== Basic Unit Reference ===
 dilbegin unit_reference();
 var
    target : unitptr;
    player : unitptr;
    npc : unitptr;
    item : unitptr;
    room : unitptr;
 code
 {
    :start:
    wait(SFB_CMD, TRUE);
    target := activator;
    
    // Store different unit references
    player := target;
    npc := findunit("guard", UNIT_ST_NPC);
    item := findunit("sword", UNIT_ST_OBJ);
    room := findunit("temple", UNIT_ST_ROOM);
    
    // Use the references
    exec("say Target is: " + target.name, self);
    exec("say Player reference: " + player.name, self);
    exec("say NPC reference: " + npc.name, self);
    exec("say Item reference: " + item.title, self);
    exec("say Room reference: " + room.title, self);
    
    goto start;
 } dilend

=== Unit Type Checking ===
 dilbegin type_checker();
 var
    unit : unitptr;
 code
 {
    :start:
    wait(SFB_CMD, command("examine"));
    unit := activator;
    
    if (unit.type == UNIT_ST_PC)
    {
       exec("say Target is a player character.", self);
    }
    else if (unit.type == UNIT_ST_NPC)
    {
       exec("say Target is an NPC.", self);
    }
    else if (unit.type == UNIT_ST_OBJ)
    {
       exec("say Target is an object.", self);
    }
    else if (unit.type == UNIT_ST_ROOM)
    {
       exec("say Target is a room.", self);
    }
    else
    {
       exec("say Target is of unknown type.", self);
    }
    
    goto start;
 } dilend

=== Unit Property Access ===
 dilbegin property_reader();
 var
    unit : unitptr;
    hp : integer;
    name : string;
 code
 {
    :start:
    wait(SFB_CMD, command("getstats"));
    unit := activator;
    
    if (unit.type == UNIT_ST_PC)
    {
       name := unit.name;
       hp := unit.hp;
       exec("say Player " + name + " has " + itoa(hp) + " hitpoints.", self);
    }
    else
    {
       exec("say Target is not a player character.", self);
    }
    
    goto start;
 } dilend

=== Unit Navigation ===
 dilbegin unit_navigation();
 var
    current_room : unitptr;
    next_room : unitptr;
 code
 {
    :start:
    wait(SFB_CMD, command("goto"));
    current_room := activator;
    
    // Navigate to next room
    next_room := current_room.outside;
    
    if (next_room != null)
    {
       exec("say Moving to: " + next_room.title, self);
       current_room := next_room;
    }
    else
    {
       exec("say No exit from current room.", self);
    }
    
    goto start;
 } dilend

=== Unit Inventory Management ===
 dilbegin inventory_manager();
 var
    player : unitptr;
    item : unitptr;
 code
 {
    :start:
    wait(SFB_CMD, command("get"));
    player := activator;
    item := medium;
    
    if (player.type == UNIT_ST_PC and item.type == UNIT_ST_OBJ)
    {
       exec("say You pick up the " + item.title + ".", self);
       // Add to player inventory
       addequip(player, item);
    }
    else
    {
       exec("say You can't pick up that item.", self);
    }
    
    goto start;
 } dilend

== Usage Notes ==
* The '''unitptr''' type is the fundamental way to reference units in DIL
* Always validate that unit pointers are not null before using them
* Use the '''type''' function to determine the actual type of a unit before operations
* Unit pointers can reference any unit type (PC, NPC, OBJ, ROOM)
* The type is commonly used for storing unit references in variables
* Unit pointers can be passed as parameters to functions that expect unitptr types
* Be careful with unit pointer arithmetic - it's not supported for navigation or positioning
* Use proper type checking to ensure operations are valid for the specific unit type

== Error Handling ==
* Always validate that unit pointers are not null before dereferencing
* Remember that unit pointers reference actual units, not copies
* Use proper bounds checking when accessing unit arrays or properties
* Be careful with assumptions about unit types - always validate using constants
* Test unit pointer operations thoroughly with all possible unit types
* Consider edge cases where unit pointers might be null or invalid

== Related Functions/Fields ==
* [[type]] - Function to get the type of a unit
* [[findunit]] - Function to find a unit by name and type
* [[addequip]] / [[unequip]] - Equipment management functions
* [[inside]] / [[outside]] - Unit hierarchy navigation
* [[names]] - Unit name list field
* [[title]] - Unit title field
* [[extra]] - Unit extra descriptions field
* [[hp]] - Unit hitpoints field
* [[max_hp]] - Unit maximum hitpoints field
* [[alignment]] - Unit alignment field
* [[openflags]] - Unit open flags field
* [[light]] - Unit light level field
* [[bright]] - Unit brightness level field
* [[illum]] - Unit illumination level field
* [[minv]] - Unit minimum visibility level field
* [[spells]] - Unit spells array field
* [[zoneidx]] - Unit zone index field
* [[nameidx]] - Unit name index field
* [[symname]] - Unit symbolic name field
* [[idx]] - Unit constant ID field
* [[hasfunc]] - Unit function presence field
* [[manipulate]] - Unit manipulation procedure
* [[setweight]] - Unit weight setting procedure
* [[weight]] - Unit weight field
* [[height]] - Unit height field
* [[capacity]] - Unit capacity field
* [[lifespan]] - Unit lifespan field
* [[key]] - Unit key field
* [[gnext]] / [[gprevious]] - Unit navigation fields
* [[master]] - Unit master field
* [[loadcount]] - Unit load count field

== See Also ==
* [[UNIT_ST_PC]] - Player character type constant
* [[UNIT_ST_NPC]] - NPC type constant
* [[UNIT_ST_OBJ]] - Object type constant
* [[UNIT_ST_ROOM]] - Room type constant
* [[type]] - Unit type checking function
* [[findunit]] - Unit finding function
* [[addequip]] - Equipment management
* [[inside]] / [[outside]] - Unit hierarchy
* [[names]] - Unit name list
* [[title]] - Unit title field
* [[extra]] - Unit extra descriptions
* [[hp]] - Unit hitpoints field
* [[alignment]] - Unit alignment field
* [[openflags]] - Unit open flags field
* [[light]] - Unit light level field
* [[bright]] - Unit brightness level field
* [[illum]] - Unit illumination level field
* [[minv]] - Unit minimum visibility level field
* [[spells]] - Unit spells field
* [[zoneidx]] - Unit zone index field
* [[nameidx]] - Unit name index field
* [[symname]] - Unit symbolic name field
* [[idx]] - Unit constant ID field
* [[hasfunc]] - Unit function presence field
* [[manipulate]] - Unit manipulation procedure
* [[setweight]] - Unit weight setting procedure
* [[weight]] - Unit weight field
* [[height]] - Unit height field
* [[capacity]] - Unit capacity field
* [[lifespan]] - Unit lifespan field
* [[key]] - Unit key field
* [[gnext]] / [[gprevious]] - Unit navigation fields
* [[master]] - Unit master field
* [[loadcount]] - Unit load count field