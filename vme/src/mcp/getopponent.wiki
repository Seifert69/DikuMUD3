= getopponent =
 function: unitptr '''getopponent'''(character : unitptr, index : integer);

The getopponent() function retrieves a specific opponent from a character's opponent list by index.

== Description ==
 The '''getopponent'''() function retrieves a specific opponent from a character's opponent list by index. In the DikuMUD combat system, a character can be fighting multiple opponents simultaneously, with one primary opponent (accessible via the .fighting field) and additional opponents in the opponent list.

 This function is commonly used to:
 * Iterate through all opponents of a character
 * Check specific opponents in multi-opponent combat situations
 * Display combat information involving multiple attackers

 The index is zero-based, so index 0 retrieves the first opponent in the list.

== Parameters ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| character || unitptr || The character whose opponent list should be searched. Must be a character unit (PC or NPC) that is currently in combat.
|-
| index || integer || The zero-based index of the opponent to retrieve. Must be >= 0.
|}

== Examples ==
 dilbegin list_opponents(target_name : string);
 var
    target : unitptr;
    opponent : unitptr;
    count : integer;
    buffer : string;
 code
 {
    target := findunit(self, target_name, FIND_UNIT_SURRO, null);
    
    if (target == null) {
       sendtext("Target not found.&n", self);
       quit;
    }
    
    if (target.opponentcount == 0) {
       sendtext(target.name + " is not fighting anyone.&n", self);
       quit;
    }
    
    buffer := target.name + " is fighting:&n";
    count := 0;
    
    while (count < target.opponentcount) {
       opponent := getopponent(target, count);
       
       if (opponent) {
          buffer := buffer + "  " + itoa(count) + ": " + opponent.name + "&n";
       }
       
       count := count + 1;
    }
    
    sendtext(buffer, self);
    quit;
 } dilend

== Usage Notes ==
* The index is zero-based, so index 0 retrieves the first opponent
* Use '''opponentcount''' field to determine the valid range of indices
* Returns null for invalid indices, allowing safe iteration
* The primary opponent is also accessible via the '''fighting''' field

== Error Handling ==
* Returns fail if character parameter is null or not a character unit
* Returns null if index is negative or exceeds opponent count
* Returns null if character is not in combat (opponentcount is 0)
* Always check return value before using the returned unit

== Related Functions/Fields ==
* [[opponent]] - Check if two units are opponents
* [[set_fighting]] - Set two characters fighting
* [[stop_fighting]] - Stop combat between characters
* [[fighting]] - Primary opponent field
* [[opponentcount]] - Number of opponents a character is fighting

== See Also ==
* [[unit_st_pc and unit_st_npc]] - Character fields including fighting and opponentcount