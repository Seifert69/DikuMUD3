= npcflags =

== Syntax ==
 function: '''npcflags'''(npc : unitptr, flags : integer);

== Description ==
The '''npcflags''' function modifies behavioral flags for non-player characters.

== Parameters ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| npc || unitptr || The NPC character to modify
|-
| flags || integer || The flag value to set (bitwise OR of existing flags)

== Return Value ==
Returns '''integer''':
* '''0''' - Successfully set the NPC flags
* '''non-zero''' - Error code if modification failed

== Examples ==
 dilbegin set_aggressive(npc : unitptr);
 var
    current_flags : integer;
 code
 {
    current_flags := npc.npcflags;
    npcflags(npc, current_flags | NPC_AGGRESSIVE);
    exec("say NPC is now aggressive.", self);
 } dilend

 dilbegin toggle_guard_mode(npc : unitptr);
 var
    flags : integer;
 code
 {
    flags := npc.npcflags;
    if (flags & NPC_GUARD)
    {
       npcflags(npc, flags & ~NPC_GUARD);
       exec("say Guard mode disabled.", self);
    }
    else
    {
       npcflags(npc, flags | NPC_GUARD);
       exec("say Guard mode enabled.", self);
    }
 } dilend

== Usage Notes ==
* The '''npcflags''' function modifies the NPC '''npcflags''' field using bitwise operations
* Common flag constants include:
** '''NPC_AGGRESSIVE''' - NPC will attack enemies on sight
** '''NPC_GUARD''' - NPC will guard and protect area
** '''NPC_SENTINEL''' - NPC will stay in designated area
** '''NPC_STAY_ZONE''' - NPC will not leave its zone
* Flags are combined using bitwise OR (|) operator
* Use [[isaff]] function to check if specific flags are set
* The function provides direct field modification equivalent to: `npc.npcflags := npc.npcflags | flags`

== Error Handling ==
* Returns '''0''' on successful flag modification
* Returns '''non-zero''' error code if:
** NPC pointer is null or invalid
** Flags parameter is invalid
* NPC is not of type UNIT_ST_NPC

== Related Functions/Fields ==
* [[npcflags]] - NPC flags field (this function)
* [[isaff]] - Check if specific NPC flags are set
* [[unit_st_npc.hlp]] - NPC-specific fields and constants
* Bitwise operations: Use | (OR) operator to combine flags

== See Also ==
* NPC behavior constants: '''NPC_AGGRESSIVE''', '''NPC_GUARD''', '''NPC_SENTINEL''', '''NPC_STAY_ZONE'''
* Bit manipulation: [[and]], [[or]], [[not]] operators
* Unit type constants: '''UNIT_ST_NPC''' 