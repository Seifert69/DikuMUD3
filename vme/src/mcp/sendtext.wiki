= sendtext =
 function: void '''sendtext'''(s : string, u : unitptr);

The '''sendtext''' function sends a text message to a specific unit, commonly used for player communication and feedback.

== Description ==
The sendtext function sends a text message directly to a specified unit. This is the primary method for delivering text output to player characters in DIL programs. The function handles special formatting for player characters, including automatic line breaks and proper text display. For non-player units, it functions as a simple message delivery mechanism.

== PARAMETERS ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| s || string || The text message to send to the unit
|-
| u || unitptr || The unit that will receive the text message
|}

== Examples ==
=== Basic Message Sending ===
 dilbegin greet_player(player_name : string);
 var
     target : unitptr;
 code
 {
     target := findunit(self, player_name, FIND_UNIT_WORLD, null);
     if (target == null)
     {
         sendtext("Player not found.&n", self);
         quit;
     }
     
     sendtext("Hello, " + player_name + "!&n", target);
 }
 dilend

=== Status Display ===
 dilbegin show_status();
 var
     hp_percent : integer;
 code
 {
     hp_percent := (self.hp * 100) / self.max_hp;
     sendtext("Health: " + itoa(hp_percent) + "%&n", self);
 }
 dilend

=== Error Messages ===
 dilbegin validate_input(input : string);
 var
     valid : integer;
 code
 {
     valid := TRUE;
     
     if (input == "")
     {
         sendtext("Error: Empty input.&n", self);
         valid := FALSE;
     }
     
     if (valid)
         sendtext("Input accepted: " + input + "&n", self);
 }
 dilend

== Usage Notes ==
* The function automatically handles text formatting for player characters
* For non-player units, text is sent as a simple message
* No automatic line break - you must manually add &n for new lines
* Commonly used for player feedback, status updates, and error messages
* More efficient than multiple [[Manual:DIL_Manual/act|act]] calls for simple text delivery
* Text is sent immediately - no queuing or delay

== Player-Specific Behavior ==
When sending to player characters (UNIT_ST_PC):
* Automatic line break handling for proper display
* Text appears in the player's message window/terminal
* Supports color codes and formatting if the MUD client supports them

== Error Handling ==
* Function will fail if the target unit is null
* No validation of text content - any string is accepted
* No return value - function cannot indicate success or failure
* Always validate target unit before calling sendtext

== Related Functions/Fields ==
* [[Manual:DIL_Manual/act|act]] - Function for sending formatted social messages
* [[Manual:DIL_Manual/send_done|send_done]] - Function for sending completion notifications
* [[Manual:DIL_Manual/send_pre|send_pre]] - Function for sending preparation messages
* [[Manual:DIL_Manual/pagestring|pagestring]] - Function for sending paginated output
* [[Manual:DIL_Manual/unitptr|unitptr]] - Unit pointer type and operations

== See Also ==
* Player communication and message systems
* Text output and display functions
* Unit interaction and feedback patterns