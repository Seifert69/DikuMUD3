{
    "keyword": "profession",
    "opcode": "DILSF_PROF",
    "yacc_rule": "| DILSF_PROF /* .profession */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UCP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_LFT;\n    $$.num = DILF_PROF;\n}",
    "dilfe_name": "DILF_PROF",
    "c_implementation": "case DILF_PROF:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                {\n                    auto *pc = reinterpret_cast<pc_data *>(v1->val.ptr);\n                    if (pc && pc->isPC())\n                    {\n                        if (p->frame[0].tmpl->zone->getAccessLevel() != 0)\n                        {\n                            v->atyp = DILA_NONE;\n                            v->type = DILV_INT;\n                            v->val.num = pc->getProfession();\n                        }\n                        else\n                        {\n                            v->type = DILV_UINT1R;\n                            v->ref = pc->getProfessionPtr();\n                        }\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL;\n                    }\n                }\n                break;\n\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin odinstatue();\nexternal\n   statue_load(pc : unitptr, s : string, i : integer);\nvar\n    pc         : unitptr;\n    expd       : extraptr;\ncode\n{\n:start:\n    wait(SFB_CMD, command(\"pray\"));\n\n    if (activator.type != UNIT_ST_PC)\n        goto start;\n\n    if (findunit(activator, argument, FIND_UNIT_SURRO, null) != self)\n        goto start;\n\n    block;\n\n    act(\"$1n kneels before $3n and prays to Odin.\", A_HIDEINV, activator, null, self, TO_ROOM);\n    act(\"You kneel before $3n and pray to Odin.\", A_ALWAYS, activator, null, self, TO_CHAR);\n\n    if (activator.level > 20)\n    {\n        act(\"You feel at ease with yourself after having prayed to Odin.\", A_ALWAYS, activator, null, null, TO_CHAR);\n        goto start;\n    }\n\n    pc := activator;\n    secure(pc, start);\n\n    act(\"The eyes of $3n glows in a bright yellow light.\", A_ALWAYS, pc, null, self, TO_ALL);\n    act(\"A voice echoes inside your head 'The Gods like you, receive this gift'\",A_ALWAYS, pc, null, self, TO_CHAR);\n\n    statue_load(pc, \"tuborg@udgaard\",        1);\n    statue_load(pc, \"midgaard/torch\",        1);\n    statue_load(pc, \"midgaard/bread\",        1);\n    statue_load(pc, \"swood_shield@midgaard\", 1);\n    statue_load(pc, \"guild_medallion@guild_paths\", 1);\n    //statue_load(pc, \"basis/dictionary\",      0);\n\n    expd := \"Newbie Quest Complete\" in pc.quests;\n    if (expd)\n    {\n        statue_load(pc, \"newbie/silring\",  1);\n    }\n\n    if (pc.profession == PROFESSION_CONJURER)\n    {\n        statue_load(pc, \"udgaard/conjurer_book\",  1);\n        statue_load(pc, \"udgaard/newbie_robes\",   1);\n        statue_load(pc, \"udgaard/newbie_bracers\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\",   1);\n        statue_load(pc, \"udgaard/conjure_item\",   1);\n        statue_load(pc, \"midgaard/dag0\",          1);\n    }\n    else if (pc.profession == PROFESSION_PRIEST)\n    {\n        statue_load(pc, \"udgaard/newbie_book\",  1);\n        statue_load(pc, \"udgaard/newbie_chain\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\", 1);\n        statue_load(pc, \"udgaard/newbie_pants\", 1);\n        statue_load(pc, \"udgaard/healer_item\",  1);\n        statue_load(pc, \"midgaard/mace\",        1);\n    }\n    else if (pc.profession == PROFESSION_FIGHTER)\n    {\n        statue_load(pc, \"udgaard/fighter_book\",    1);\n        statue_load(pc, \"udgaard/newbie_plate\",    1);\n        statue_load(pc, \"udgaard/newbie_psleeves\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\",    1);\n        statue_load(pc, \"udgaard/newbie_legg\",     1);\n        statue_load(pc, \"udgaard/fighter_item\",    1);\n        statue_load(pc, \"udgaard/axe0\",            1);\n    }\n    else if (pc.profession == PROFESSION_THIEF)\n    {\n        statue_load(pc, \"udgaard/thief_book\",    1);\n        statue_load(pc, \"udgaard/newbie_jacket\", 1);\n        statue_load(pc, \"udgaard/newbie_lpants\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\",  1);\n        statue_load(pc, \"udgaard/newbie_cloak\",  1);\n        statue_load(pc, \"udgaard/thief_item\",    1);\n        statue_load(pc, \"midgaard/sword0\",       1);\n    }\n    else if (pc.profession == PROFESSION_ASSASSIN)\n    {\n        statue_load(pc, \"udgaard/assassin_book\", 1);\n        statue_load(pc, \"udgaard/newbie_jacket\", 1);\n        statue_load(pc, \"udgaard/newbie_lpants\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\",  1);\n        statue_load(pc, \"udgaard/newbie_cloak\",  1);\n        statue_load(pc, \"udgaard/assassin_item\", 1);\n        statue_load(pc, \"udgaard/thief_dagger\",  1);\n    }\n    else if (pc.profession == PROFESSION_RANGER)\n    {\n        statue_load(pc, \"udgaard/ranger_book\",   1);\n        statue_load(pc, \"udgaard/newbie_plate\",  1);\n        statue_load(pc, \"udgaard/newbie_lpants\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\",  1);\n        statue_load(pc, \"udgaard/newbie_cloak\",  1);\n        statue_load(pc, \"udgaard/ranger_item\",   1);\n        statue_load(pc, \"ranger/ranger_bow\",     1);\n        statue_load(pc, \"udgaard/rapier\",        1);\n    }\n    else if (pc.profession == PROFESSION_SORCERER)\n    {\n        statue_load(pc, \"udgaard/sorcerer_book\",  1);\n        statue_load(pc, \"udgaard/newbie_robes\",   1);\n        statue_load(pc, \"udgaard/newbie_bracers\", 1);\n        statue_load(pc, \"udgaard/newbie_boots\",   1);\n        statue_load(pc, \"udgaard/sorcerer_item\",  1);\n        statue_load(pc, \"sorc_pendant@sorcerer\",  1);\n        statue_load(pc, \"midgaard/dag0\",          1);\n    }\n    else if (pc.profession == PROFESSION_PALADIN)\n    {\n        statue_load(pc, \"udgaard/paladin_book\",     1);\n        statue_load(pc, \"udgaard/newbie_plate\",     1);\n        statue_load(pc, \"udgaard/newbie_bracer\",  1);\n        statue_load(pc, \"udgaard/newbie_boots\",     1);\n        statue_load(pc, \"udgaard/cloth\",            1);\n        statue_load(pc, \"udgaard/paladin_item\",     1);\n        statue_load(pc, \"paladin_guild/fl1_tongue\", 1);\n        statue_load(pc, \"midgaard/sword0\",          1);\n    }\n    else if (pc.profession == PROFESSION_NECROMANCER)\n    {\n        statue_load(pc, \"udgaard/necro_book\",     1);\n        statue_load(pc, \"udgaard/newbie_robes\",   1);\n        statue_load(pc, \"udgaard/newbie_boots\",   1);\n        statue_load(pc, \"udgaard/newbie_pants\",   1);\n        statue_load(pc, \"udgaard/necro_item\",     1);\n        statue_load(pc, \"midgaard/silver_dagger\", 1);\n        statue_load(pc, \"necro_guild/necro_hand\", 1);\n    }\n    else if (pc.profession == PROFESSION_DRUID)\n    {\n        statue_load(pc, \"udgaard/druid_book\",     1);\n        statue_load(pc, \"udgaard/druid_robes\",    1);\n        statue_load(pc, \"udgaard/newbie_boots\",   1);\n        statue_load(pc, \"udgaard/druid_cloak\",    1);\n        statue_load(pc, \"udgaard/druid_item\",     1);\n        statue_load(pc, \"udgaard/short_staff\",    1);\n    }\n    else if (pc.profession == PROFESSION_KNIGHT)\n    {\n        statue_load(pc, \"udgaard/knight_book\",      1);\n        statue_load(pc, \"udgaard/knight_pants\",     1);\n        statue_load(pc, \"udgaard/knight_boots\",     1);\n        statue_load(pc, \"udgaard/trench_coat\",      1);\n        statue_load(pc, \"udgaard/knight_sleeves\",   1);\n        statue_load(pc, \"udgaard/rapier\",           1);\n        statue_load(pc, \"udgaard/knight_jerkin\",    1);\n        statue_load(pc, \"knight/berret\",            1);\n    }\n    else if (pc.profession == PROFESSION_BARBARIAN)\n    {\n        statue_load(pc, \"udgaard/newbie_book\",      1);\n        statue_load(pc, \"udgaard/newbie_jerkin\",    1);\n        statue_load(pc, \"udgaard/newbie_bracer\",    1);\n        statue_load(pc, \"udgaard/newbie_boots\",     1);\n        statue_load(pc, \"udgaard/newbie_cloth\",     1);\n        statue_load(pc, \"udgaard/barbarian_item\",   1);\n        statue_load(pc, \"udgaard/axe0\",             1);\n    }\n    else \n    {\n        sendtext(\"It's so odd, please report to admin your profession is \"+itoa(pc.profession)+\"&amp;n\", pc);\n    }\n    unsecure(pc);\n    goto start;\n} dilend"
}