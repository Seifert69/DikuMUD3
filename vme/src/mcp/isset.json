{
    "keyword": "isset",
    "opcode": "DILSE_ISS",
    "yacc_rule": "| DILSE_ISS '(' dilexp ',' dilexp ')'\n{\n    INITEXP($$);\n    $$.boolean = 1;\n    if ($3.typ != DilVarType_e::DILV_INT)\n    {\n        dilfatal(\"Arg 1 of 'isset' not integer\");\n    }\n    else if ($5.typ != DilVarType_e::DILV_INT)\n    {\n        dilfatal(\"Arg 2 of 'isset' not integer\");\n    }\n    else\n    {\n        /* Type is ok */\n        /* Function is not _yet_ static */\n        /* Make nodes dynamic */\n        $$.dsl = DSL_DYN;\n        $$.typ = DilVarType_e::DILV_INT;\n        make_code(&($3));\n        make_code(&($5));\n        add_code(&($$), &($3));\n        add_code(&($$), &($5));\n        add_ubit8(&($$), DILE_ISS);\n    }\n    FREEEXP($3);\n    FREEEXP($5);\n}",
    "dilfe_name": "dilfe_iss",
    "c_implementation": "void dilfe_iss(dilprg *p)\n{\n    // Test if bist are set\n    dilval *v2 = p->stack.pop();\n    dilval *v1 = p->stack.pop();\n    dilval *v = new dilval;\n    switch (dil_getval(v2))\n    {\n        case DILV_FAIL:\n            v->type = DILV_FAIL;\n            break;\n        case DILV_INT:\n            switch (dil_getval(v1))\n            {\n                case DILV_FAIL:\n                    v->type = DILV_FAIL;\n                    break;\n                case DILV_INT:\n                    v->type = DILV_INT;\n                    v->atyp = DILA_NONE;\n                    v->val.num = IS_SET(v1->val.num, v2->val.num);\n                    break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;\n        default:\n            v->type = DILV_ERR; /* wrong type */\n            break;\n    }\n\n    delete v1;\n    delete v2;\n    p->stack.push(v);\n}",
    "dil_example": "dilbegin rotaway();\ncode\n{\n   heartbeat := PULSE_SEC * 9600;\n\n   :loop:\n   pause;\n\n   if (self.outside.type == UNIT_ST_ROOM)\n   {\n      if (not isset(self.flags, UNIT_FL_BURIED))\n        act(\"A \"+self.name+\" rots away.\" , A_SOMEONE, self, null, null, TO_ROOM);\n      destroy(self);\n   }\n\n   goto loop;\n} dilend"
}