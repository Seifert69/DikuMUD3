{
    "keyword": "flags",
    "opcode": "DILSF_FL",
    "yacc_rule": "| DILSF_FL /* .flags */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_UP;\n    $$.typ = DilVarType_e::DILV_INT;\n    $$.dsl = DSL_LFT;\n    $$.num = DILF_FL;\n}",
    "dilfe_name": "DILF_FL",
    "c_implementation": "case DILF_FL:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_UP:\n                {\n                    auto *unit = reinterpret_cast<unit_data *>(v1->val.ptr);\n                    if (unit)\n                    {\n                        /* ubit16 flags; */\n                        v->atyp = DILA_NONE;\n                        v->type = DILV_UINT2R;\n                        v->ref = unit->getUnitFlagsPtr();\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                }\n                break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin rotaway();\ncode\n{\n   heartbeat := PULSE_SEC * 9600;\n\n   :loop:\n   pause;\n\n   if (self.outside.type == UNIT_ST_ROOM)\n   {\n      if (not isset(self.flags, UNIT_FL_BURIED))\n        act(\"A \"+self.name+\" rots away.\" , A_SOMEONE, self, null, null, TO_ROOM);\n      destroy(self);\n   }\n\n   goto loop;\n} dilend"
}