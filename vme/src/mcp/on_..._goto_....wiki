= on...goto =

 statement: '''on''' n : integer goto (label1 : string, label2 : string, ...);

Conditional goto statement that transfers program control to different labels based on integer value.

== Description ==
The '''on''' statement with multiple labels provides a structured way to transfer program control to different sections based on the value of an integer expression. It's essentially a multi-way conditional jump that selects which label to jump to based on the integer parameter 'n'.

The construct takes the form:
 on n goto (label1, label2, ..., labelN);

Where 'n' is the integer value to evaluate, and the program jumps to the label corresponding to that value. If 'n' is 0, the program jumps to label1; if 'n' is 1, it jumps to label2; and so on. The number of labels must match the range of possible values for 'n'.

== Parameters ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| n || integer || The integer value to evaluate for label selection
| label1 || string || The label to jump to when n equals 0
| label2 || string || The label to jump to when n equals 1
| ... || string || Additional labels for subsequent values (label3 for n=2, etc.)
|}

== Examples ==
=== Basic Multi-Direction ===
 dilbegin multi_direction();
 var
    direction : integer;
 code
 {
    :start:
    direction := rnd(0, 3); // Random direction 0-3
    
    on direction goto (north, south, east, west);
    
    :north:
    exec("go north", self);
    goto start;
    
    :south:
    exec("go south", self);
    goto start;
    
    :east:
    exec("go east", self);
    goto start;
    
    :west:
    exec("go west", self);
    goto start;
 } dilend

=== State Machine ===
 dilbegin state_machine();
 var
    state : integer;
 code
 {
    state := 0;
    
    :start:
    on state goto (idle, walking, fighting, sleeping);
    
    :idle:
    exec("say I am idle.", self);
    state := 1;
    goto start;
    
    :walking:
    exec("say I am walking.", self);
    state := 2;
    goto start;
    
    :fighting:
    exec("say I am fighting!", self);
    state := 3;
    goto start;
    
    :sleeping:
    exec("say I am sleeping.", self);
    state := 0;
    goto start;
 } dilend

=== Menu System ===
 dilbegin menu_system();
 var
    choice : integer;
 code
 {
    :start:
    exec("say 1. Talk to guard", self);
    exec("say 2. Buy equipment", self);
    exec("say 3. Leave", self);
    
    wait(SFB_CMD, command("1") or command("2") or command("3"));
    choice := atoi(argument);
    
    on choice goto (talk_guard, buy_equipment, leave_area);
    
    :talk_guard:
    exec("say You talk to the guard.", self);
    goto start;
    
    :buy_equipment:
    exec("say You browse the equipment shop.", self);
    goto start;
    
    :leave_area:
    exec("say You leave the area.", self);
    goto start;
 } dilend

=== Random Action Selector ===
 dilbegin random_action();
 var
    action : integer;
 code
 {
    :start:
    action := rnd(0, 4); // Random action 0-4
    
    on action goto (dance, sing, tell_story, play_music, rest);
    
    :dance:
    exec("emote dances around happily.", self);
    goto start;
    
    :sing:
    exec("say " + self.name + " sings a beautiful song.", self);
    goto start;
    
    :tell_story:
    exec("say " + self.name + " tells an ancient tale.", self);
    goto start;
    
    :play_music:
    exec("say " + self.name + " plays a haunting melody.", self);
    goto start;
    
    :rest:
    exec("say " + self.name + " rests quietly.", self);
    goto start;
 } dilend


=== Error Handler ===
 dilbegin error_router();
 var
    error_code : integer;
 code
 {
    :start:
    error_code := rnd(0, 3); // Random error 0-3
    
    on error_code goto (file_error, memory_error, network_error, unknown_command);
    
    :file_error:
    exec("say Error: File not found.", self);
    goto start;
    
    :memory_error:
    exec("say Error: Out of memory.", self);
    goto start;
    
    :network_error:
    exec("say Error: Network connection lost.", self);
    goto start;
    
    :unknown_command:
    exec("say Error: Unknown command.", self);
    goto start;
 } dilend

=== Extended Label List ===
 dilbegin extended_labels();
 var
    option : integer;
 code
 {
    :start:
    option := rnd(0, 9); // Random option 0-9
    
    on option goto (opt0, opt1, opt2, opt3, opt4, opt5, opt6, opt7, opt8, opt9);
    
    :opt0:
    exec("say Option 0 selected.", self);
    goto start;
    
    :opt1:
    exec("say Option 1 selected.", self);
    goto start;
    
    :opt2:
    exec("say Option 2 selected.", self);
    goto start;
    
    :opt3:
    exec("say Option 3 selected.", self);
    goto start;
    
    :opt4:
    exec("say Option 4 selected.", self);
    goto start;
    
    :opt5:
    exec("say Option 5 selected.", self);
    goto start;
    
    :opt6:
    exec("say Option 6 selected.", self);
    goto start;
    
    :opt7:
    exec("say Option 7 selected.", self);
    goto start;
    
    :opt8:
    exec("say Option 8 selected.", self);
    goto start;
    
    :opt9:
    exec("say Option 9 selected.", self);
    goto start;
 } dilend

== Usage Notes ==
* The '''on''' statement with multiple labels is equivalent to a series of if-else statements
* The integer parameter 'n' determines which label to jump to (0-based indexing)
* Labels must be defined elsewhere in the program using the format ':labelname:'
* The number of labels provided must match the range of possible values for 'n'
* If 'n' is outside the range of provided labels, the on statement is skipped
* This construct is useful for creating state machines, menu systems, or multi-way branching
* The on statement provides cleaner code structure compared to nested if-else chains
* Each label represents a potential execution path from the current point

== Error Handling ==
* Ensure the integer 'n' is properly validated before using it in the on statement
* Verify that all referenced labels exist in the program
* Check that the range of 'n' values matches the number of labels provided
* Be careful with infinite loops when using on statements without proper exit conditions
* Remember that on statements transfer control unconditionally - they don't check conditions
* Test all possible code paths to ensure proper behavior for each value of 'n'
* Use meaningful label names to improve code readability and maintenance

== Related Functions/Fields ==
* [[goto]] - Unconditional jump to a specific label
* [[if]] - Conditional branching based on boolean expressions
* [[rnd]] - Generate random numbers for on statement selection
* [[atoi]] - Convert strings to integers for numeric comparisons

== See Also ==
* [[goto]] - Unconditional jumping
* [[if]] - Conditional branching
* [[while]] - Loop construct (alternative to on-based loops)
* [[switch]] - Similar multi-way branching construct