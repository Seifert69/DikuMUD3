= charflags =
 field: integer '''charflags''' (Read-write)

The '''charflags''' field contains character flags specifying spell affects, character states, and other attributes.

== Description ==
The charflags field is a bitfield that contains various character flags specifying spell affects, character states, and other attributes for player characters (PCs) and non-player characters (NPCs). This field is accessible as a property of unit objects of type UNIT_ST_PC or UNIT_ST_NPC.

== Field Access ==
{| class="wikitable"
! Access !! Type !! Description
|-
| unit.charflags || integer || The character flags bitfield
|}

== Availability ==
This field is available on the following unit types:
* UNIT_ST_PC (Player Character)
* UNIT_ST_NPC (Non-Player Character)

== Examples ==
=== Check Outlaw Status ===
 dilbegin check_outlaw();
 code
 {
    if (activator.charflags & CHAR_OUTLAW) {
       act("$1n is an outlaw!", A_ALWAYS, self, null, activator, TO_ROOM);
    } else {
       act("$1n is a law-abiding citizen.", A_ALWAYS, self, null, activator, TO_ROOM);
    }
    quit;
 } dilend

=== Protection Status ===
 dilbegin check_protection();
 code
 {
    if (isset(activator.charflags, CHAR_PROTECTED)) {
       send("This character is protected.");
    } else {
       send("This character is not protected.");
    }
    quit;
 } dilend

=== Set Self Defence ===
 dilbegin set_self_defence();
 code
 {
    set(activator.charflags, CHAR_SELF_DEFENCE);
    send("You are now in self-defence mode.");
    quit;
 } dilend

=== Remove Outlaw Flag ===
 dilbegin remove_outlaw();
 code
 {
    unset(activator.charflags, CHAR_OUTLAW);
    send("You are no longer marked as an outlaw.");
    quit;
 } dilend

=== Multiple Flag Operations ===
 dilbegin manage_flags();
 code
 {
    // Set multiple flags at once
    set(activator.charflags, CHAR_OUTLAW | CHAR_PROTECTED);
    send("You are now a protected outlaw.");
    
    pause;
    
    // Check specific flags
    if (isset(activator.charflags, CHAR_OUTLAW)) {
       send("Still marked as outlaw.");
    }
    if (isset(activator.charflags, CHAR_PROTECTED)) {
       send("Still protected.");
    }
    
    // Clear all flags
    set(activator.charflags, 0);
    send("All character flags cleared.");
    quit;
 } dilend

=== Flag Combination Check ===
 dilbegin check_combination();
 code
 {
    if ((activator.charflags & CHAR_OUTLAW) and (activator.charflags & CHAR_PROTECTED)) {
       send("You are a protected outlaw.");
    } else if (activator.charflags & CHAR_OUTLAW) {
       send("You are an outlaw.");
    } else if (activator.charflags & CHAR_PROTECTED) {
       send("You are protected.");
    } else {
       send("You have no special flags.");
    }
    quit;
 } dilend

== Usage Notes ==
* This field is read/write - you can both read and modify character flags
* Only available on character units (PCs and NPCs)
* Use bit manipulation functions like set(), unset(), and isset() to work with individual flags
* Common flags include CHAR_OUTLAW, CHAR_PROTECTED, and CHAR_SELF_DEFENCE among others
* Flags are combined using bitwise OR operations

== Error Handling ==
The field performs validation:
* '''Unit validation''' - Ensures unit is a character type
* '''Type validation''' - Returns fail if unit is not a valid type
* '''Range validation''' - Validates flag values are within valid range

== Related Functions ==
* [[Manual:DIL_Manual/set|set]] - Set specific bits in an integer
* [[Manual:DIL_Manual/unset|unset]] - Clear specific bits in an integer
* [[Manual:DIL_Manual/isset|isset]] - Check if specific bits are set in an integer

== See Also ==
* [[Manual:DIL_Manual/UNIT_ST_PC|UNIT_ST_PC]] - Player character unit type
* [[Manual:DIL_Manual/UNIT_ST_NPC|UNIT_ST_NPC]] - Non-player character unit type
* [[Manual:DIL_Manual/CHAR_*|CHAR_*]] - Character flag constants
