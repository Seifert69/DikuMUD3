= delunit =
 function: '''delunit'''(filename : string) : integer;

The '''delunit''' function deletes a unit file from the game's file system.

== Description ==
The delunit function is used to delete unit files that are managed by the game's unit file system (used with store() and restore() functions). This function operates with security restrictions to prevent unauthorized unit deletion.

== Parameters ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| filename || string || The name of the unit file to be deleted
|}

== Return Value ==
Returns an integer:
* '''1''' (TRUE) - If the file was successfully deleted
* '''0''' (FALSE) - If the file was not deleted or deletion failed

== Examples ==
=== Basic Unit Deletion ===
 dilbegin delete_temp_unit();
 code
 {
    if (delunit("temp_guardian.unit")) {
       act("Temporary unit file deleted successfully.", A_ALWAYS, self, null, null, TO_CHAR);
    } else {
       act("Failed to delete temporary unit file.", A_ALWAYS, self, null, null, TO_CHAR);
    }
    quit;
 } dilend

=== Unit File Management ===
 dilbegin manage_unit_files();
 var
    command : string;
    filename : string;
 code
 {
    wait(SFB_CMD, TRUE);
    command := argument;
    
    if (command == "deleteunit") {
       filename := getword(argument, 1);
       
       if (filename != "") {
          if (delunit(filename)) {
             act("Unit file '" + filename + "' deleted successfully.", A_ALWAYS, self, null, null, TO_CHAR);
          } else {
             act("Unit file '" + filename + "' not found.", A_ALWAYS, self, null, null, TO_CHAR);
          }
       } else {
          act("Usage: deleteunit <filename>", A_ALWAYS, self, null, null, TO_CHAR);
       }
    } else if (command == "listunits") {
       act("Unit file management commands: deleteunit, listunits", A_ALWAYS, self, null, null, TO_CHAR);
    } else {
       act("Unknown command.", A_ALWAYS, self, null, null, TO_CHAR);
    }
    quit;
 } dilend

=== Secure Unit Deletion ===
 dilbegin secure_unit_delete();
 var
    filename : string;
 code
 {
    filename := argument;
    
    // Validate filename
    if (filename == "" or length(filename) > 50) {
       act("Invalid filename. Must be 1-50 characters.", A_ALWAYS, self, null, null, TO_CHAR);
       quit;
    }
    
    if (delunit(filename)) {
       act("Unit file '" + filename + "' deleted securely.", A_ALWAYS, self, null, null, TO_CHAR);
    } else {
       act("Failed to delete unit file or file not found.", A_ALWAYS, self, null, null, TO_CHAR);
    }
    quit;
 } dilend

== Usage Notes ==
* Only deletes unit files within the zone's designated unit file directory
* Requires zone access level 10 or higher
* Filenames are validated for security (length limits, character restrictions)
* The deletion is permanent and cannot be undone
* Used for managing temporary NPCs, custom creatures, or other unit-based content
* The function performs security logging of all deletion attempts

== Error Handling ==
The function performs validation:
* '''Zone validation''' - Ensures caller has sufficient zone access
* '''Filename validation''' - Checks filename length and valid characters
* '''Security check''' - Logs unauthorized deletion attempts
* '''File existence check''' - Returns FALSE if file doesn't exist

== Related Functions ==
* [[store]] - Store units to unit files
* [[restore]] - Restore units from unit files
* [[log]] - Log system messages

== See Also ==
* [[zone]] - Zone pointer and access control
* [[unit file system]] - Game unit management