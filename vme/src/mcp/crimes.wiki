= crimes =

== Syntax ==
 unit.crimes : integer (read-only)

== Description ==
The crimes field is a read-only property of player character units that returns the number of crimes the character has committed. This field tracks the character's criminal history and is used by justice systems, law enforcement mechanics, and various gameplay systems that need to monitor player behavior.

The crimes counter typically increases when a character commits criminal acts such as theft, assault, murder, or other illegal activities within the game world.

== Usage Notes ==
* Only available on player character units (UNIT_ST_PC)
* Returns an integer representing the number of crimes committed
* The field is read-only and cannot be modified directly through DIL
* Used by justice systems, guard NPCs, and law enforcement mechanics
* Often checked alongside other character flags like CHAR_OUTLAW
* The value persists across character sessions and is saved with the player

== Examples ==
=== Basic crime check ===
 dilbegin check_criminal();
 var
    player : unitptr;
 code
 {
    player := activator;
    
    if (player.crimes > 0)
        act("You have committed " + itoa(player.crimes) + " crimes.", 
            A_ALWAYS, player, null, null, TO_CHAR);
    else
        act("You have a clean record.", A_ALWAYS, player, null, null, TO_CHAR);
    
    quit;
 } dilend

=== Law enforcement ===
 dilbegin guard_check();
 var
    suspect : unitptr;
 code
 {
    suspect := activator;
    
    if (suspect.type == UNIT_ST_PC)
    {
        if (suspect.crimes > 5)
        {
            act("$1n is a known criminal with " + itoa(suspect.crimes) + 
                " offenses!", A_ALWAYS, self, suspect, null, TO_ROOM);
            act("You're under arrest for your crimes!", 
                    A_ALWAYS, self, suspect, null, TO_CHAR);
        }
        else if (suspect.crimes > 0)
        {
            act("$1n has a minor criminal record.", A_ALWAYS, self, suspect, null, TO_ROOM);
        }
        else
        {
            act("$1n has a clean record.", A_ALWAYS, self, suspect, null, TO_ROOM);
        }
    }
    
    quit;
 } dilend

=== Justice system ===
 dilbegin justice_system();
 var
    defendant : unitptr;
    verdict : string;
 code
 {
    defendant := activator;
    
    if (defendant.crimes == 0)
        verdict := "innocent";
    else if (defendant.crimes <= 2)
        verdict := "minor offender";
    else if (defendant.crimes <= 5)
        verdict := "criminal";
    else
        verdict := "habitual criminal";
    
    act("Justice System Verdict: " + verdict, A_ALWAYS, defendant, null, null, TO_CHAR);
    act("Crimes committed: " + itoa(defendant.crimes), 
                A_ALWAYS, defendant, null, null, TO_CHAR);
    
    quit;
 } dilend

=== Entry restriction ===
 dilbegin city_gates();
 var
    traveler : unitptr;
 code
 {
    traveler := activator;
    
    if (traveler.crimes > 3)
    {
        act("Guards block your path. \"Your criminal record prevents entry.\"",
                A_ALWAYS, self, traveler, null, TO_CHAR);
        act("The guards turn away $1n at the city gates.", 
                A_ALWAYS, self, traveler, null, TO_ROOM);
    }
    else
    {
        act("You pass through the city gates unmolested.", 
                A_ALWAYS, self, traveler, null, TO_CHAR);
    }
    
    quit;
 } dilend

=== Crime tracking ===
 dilbegin crime_report();
 var
    criminal : unitptr;
    i : integer;
 code
 {
    criminal := activator;
    
    act("=== CRIME REPORT ===", A_ALWAYS, criminal, null, null, TO_CHAR);
    act("Player: " + criminal.name, A_ALWAYS, criminal, null, null, TO_CHAR);
    act("Total Crimes: " + itoa(criminal.crimes), A_ALWAYS, criminal, null, null, TO_CHAR);
    act("Status: " + (isset(criminal.charflags, CHAR_OUTLAW) ? "WANTED" : "CLEAN"),
                A_ALWAYS, criminal, null, null, TO_CHAR);
    
    quit;
 } dilend

== Implementation Details ==
The crimes field is implemented as a reference to the player's crime counter (getNumberOfCrimesCommittedPtr()). This returns an integer value representing the total number of criminal acts the character has committed. The field is read-only to prevent unauthorized modification of criminal records through DIL code. The value is typically managed by game systems that handle criminal acts and is persisted as part of the player's data.

== See Also ==
* [[charflags]] - Character flags including CHAR_OUTLAW
* [[isplayer]] - Check if a unit is a player character
* [[quests]] - Quest and achievement tracking