{
    "keyword": "mudday",
    "opcode": "DILSE_TDA",
    "yacc_rule": "| DILSE_TDA\n{\n    INITEXP($$);\n    $$.dsl = DSL_DYN;\n    $$.typ = DilVarType_e::DILV_INT;\n    add_ubit8(&($$), DILE_TDA);\n}",
    "dilfe_name": "dilfe_tda",
    "c_implementation": "void dilfe_tda(dilprg *p)\n{\n    dilval *v = new dilval;\n    /* MudDay */\n\n    v->type = DILV_INT;\n    v->atyp = DILA_NONE;\n    v->val.num = mud_date().getDay();\n    p->stack.push(v);\n}",
    "dil_example": "dilbegin recall home();\nvar\n   hour : integer;\n   i : integer;\n\ncode\n{\n   hour := -24;\n\n   :start:\n   wait(SFB_CMD, (activator == self.outside) and command(\"home\"));\n   block;\n   if (self.outside.position == POSITION_FIGHTING)\n   {\n      act(\"The $2N does not work in combat.\",\n         A_ALWAYS, self.outside, self, null, TO_CHAR);\n      goto start;\n   }\n\n   if (self.equip == 0)\n   {\n      act(\"The $2N must be worn for it to work.\",\n         A_ALWAYS, self.outside, self, null, TO_CHAR);\n      goto start;\n   }\n\n   if (activator.level > 3)\n   {\n      act(\"As you attempt to use $2n it suddenly dissolves.\",\n         A_ALWAYS, self.outside, self, null, TO_CHAR);\n      act(\"$1n's $2n suddenly dissolves as $1e attempts to use it,\",\n         A_ALWAYS, self.outside, self, null, TO_REST);\n      destroy(self);\n   }\n   i := hour - (mudhour + mudday * MUD_DAY);\n   if (i < 0)\n     i := -i;\n   if (i < 6)\n   {\n      act(\"The $2N has not charged enough power yet.\",\n         A_ALWAYS, self.outside, self, null, TO_CHAR);\n      goto start;\n   }\n   hour := mudhour + mudday * MUD_DAY;\n   act(\"Your $2N glows and you feel transported to another place!\",\n        A_ALWAYS, self.outside, self, null, TO_CHAR);\n   act(\"The $2N on $1n's finger glows brightly as $1e vanishes in a \"+\n       \"flash of light!\", A_ALWAYS, self.outside, self, null, TO_REST);\n   link(self.outside, findroom(self.outside.hometown));\n   exec(\"look\", self.outside);\n   act(\"$1n appears in a flash of light!\",\n       A_ALWAYS, self.outside, self, null, TO_REST);\n   goto start;\n} dilend"
}