{
    "keyword": "rooms",
    "opcode": "DILSF_ROOMS",
    "yacc_rule": "| DILSF_ROOMS /* .rooms */\n{\n    INITEXP($$);\n    $$.rtyp = DilVarType_e::DILV_ZP;\n    $$.typ = DilVarType_e::DILV_UP;\n    $$.dsl = DSL_DYN;\n    $$.num = DILF_ROOMS;\n}",
    "dilfe_name": "DILF_ROOMS",
    "c_implementation": "case DILF_ROOMS:\n            switch (dil_getval(v1))\n            {\n                case DILV_NULL: /* not applicable */\n                case DILV_FAIL:\n                    v->type = DILV_FAIL; /* not applicable */\n                    break;\n                case DILV_ZP:\n                    if (v1->val.ptr)\n                    {\n                        v->atyp = DILA_NORM;\n                        v->type = DILV_UP;\n                        auto *z = (zone_type *)v1->val.ptr;\n\n                        v->val.ptr = z->findFirstRoom();\n                        if (v->val.ptr == nullptr)\n                        {\n                            v->type = DILV_FAIL;\n                        }\n                    }\n                    else\n                    {\n                        v->type = DILV_FAIL; /* not applicable */\n                    }\n                    break;\n                default:\n                    v->type = DILV_ERR; /* wrong type */\n                    break;\n            }\n            break;",
    "dil_example": "dilbegin all_block();\nvar\n  word:string;\n  args:stringlist;\ncode\n{\n   :start:\n   wait(SFB_CMD, ((command(\"get\")) or (command (\"bury\"))));\n   word:=getword (argument);\n\n   if (word== \"all\")\n   {\n      block;\n      act(\"This command's 'all' argument has been restricted for Donations rooms.\",\n A_ALWAYS, activator, null, null, TO_CHAR);\n   }\n   args:=split(word,\".\");\n   if (length(args)>1)\n   if (args.[0]==\"all\")\n   {\n         block;\n      act(\"This command's 'all' argument has been restricted for Donations rooms.\",\n A_ALWAYS, activator, null, null, TO_CHAR);\n\n   }\n         goto start;\n} dilend"
}