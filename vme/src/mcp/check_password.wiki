= check_password =
 function: '''check_password'''(unit : unitptr, password : string) : integer;

The '''check_password''' function verifies whether a given password matches a player's stored password.

== Description ==
The check_password function verifies whether a given password string matches the stored password of a player character. This function only works on player characters (PCs) and will fail if used on NPCs or other unit types.

== Parameters ==
{| class="wikitable"
! Parameter !! Type !! Description
|-
| unit || unitptr || The player character unit whose password you want to check
|-
| password || string || The password string to verify against the player's password
|}

== Return Value ==
Returns an integer:
* '''1''' (TRUE) - If the password matches the player's password
* '''0''' (FALSE) - If it does not match
* '''fail''' - If unit parameter is invalid or not a player

== Examples ==
=== Basic Password Verification ===
 dilbegin verify_password();
 code
 {
    if (not check_password(pc, argument)) {
       send(argument + " is not " + pc.name + "'s password.");
    } else {
       send("Password verified successfully.");
    }
    quit;
 } dilend

=== Authentication System ===
 dilbegin authenticate_player(target : unitptr, password : string);
 var
    authenticated : integer;
 code
 {
    authenticated := check_password(target, password);
    
    if (authenticated) {
       act("Authentication successful for $1n.", A_ALWAYS, target, null, null, TO_ROOM);
    } else {
       act("Authentication failed for $1n.", A_ALWAYS, target, null, null, TO_ROOM);
    }
    quit;
 } dilend

=== Password Change Verification ===
 dilbegin verify_old_password(new_pwd : string);
 var
    old_pwd : string;
 code
 {
    send("Enter your current password:");
    pause;
    old_pwd := excmdstr;
    
    if (not check_password(self, old_pwd)) {
       send("Incorrect password. Password change cancelled.");
    } else {
       send("Password verified. Proceeding with password change.");
    }
    quit;
 } dilend

=== Security Check ===
 dilbegin security_check();
 code
 {
    if (check_password(self, "admin123")) {
       send("Access granted to administrative functions.");
    } else {
       send("Access denied. Invalid password.");
    }
    quit;
 } dilend

=== Multiple Attempts ===
 dilbegin password_attempts();
 var
    attempts : integer;
    input_pwd : string;
 code
 {
    attempts := 0;
    
    while (attempts < 3) {
       send("Enter password (attempt " + itoa(attempts + 1) + "):");
       pause;
       input_pwd := excmdstr;
       
       if (check_password(self, input_pwd)) {
          send("Access granted!");
          break;
       } else {
          send("Invalid password. Try again.");
       }
       attempts := attempts + 1;
    }
    
    if (attempts >= 3) {
       send("Too many failed attempts. Access denied.");
    }
    quit;
 } dilend

== Usage Notes ==
* Only works on player characters (PCs) - will fail and log an error if used on NPCs
* The password comparison is secure and uses proper cryptographic hashing
* This function is commonly used for authentication and password verification systems
* The function returns a boolean result as an integer (TRUE/FALSE)
* Always use this function rather than trying to compare passwords directly

== Error Handling ==
The function will fail and return an error if:
* The target unit is not a player character
* The password string is null or invalid
* The unit pointer is null or invalid

== Security Considerations ==
* Passwords are stored using secure cryptographic hashing
* The function does not expose the actual stored password
* Password comparison is done securely using the system's pwdcompare function
* Always use this function rather than trying to compare passwords directly

== Related Functions ==
* [[set_password]] - Set or change a player's password
* [[isplayer]] - Check if a unit is a player character

== See Also ==
* [[UNIT_ST_PC]] - Player character unit type
* [[cryptographic hashing]] - Security system
* [[authentication]] - Player authentication system