{
    "keyword": "chead",
    "opcode": "DILSE_CHEAD",
    "yacc_rule": "| DILSE_CHEAD '(' ')'\n{\n    INITEXP($$);\n    $$.dsl = DSL_DYN;\n    $$.typ = DilVarType_e::DILV_CP;\n    add_ubit8(&($$), DILE_CHEAD);\n}",
    "dilfe_name": "dilfe_chead",
    "c_implementation": "void dilfe_chead(dilprg *p)\n{\n    dilval *v = new dilval;\n    v->atyp = DILA_NORM;\n    v->type = DILV_CP;\n    v->val.ptr = g_cmdlist;\n    p->stack.push(v);\n}",
    "dil_example": "dilbegin do_wiz(arg : string);\nvar\nch : unitptr;\nwizlvl : integer;\nwizcmd : cmdptr;\ntmp : string;\ncnt : integer;\nemote : integer;\nlft : string;\ncode\n{\n\n   if (arg == \"\")\n   {\n    sendtext(\"Gods don't like being bothered like that!<br/>\",self);\n    quit;\n   }\n\n   wizcmd := chead();\n\n   while ((wizcmd) and (wizcmd.name != \"wiz\"))\n    wizcmd := wizcmd.next;\n\n   if (isset(self.flags,UNIT_FL_BURIED))\n   {\n    sendtext(\"You can not talk while buried.<br/>\", self);\n    quit;\n   }\n\n   if ((left(arg,1) == \"@\") and (length(arg) > 1))\n   {\n   tmp := getword(arg);\n   emote := TRUE;\n   }\n\n   else if (arg == \"-\")\n   {\n    if (isset(self.pcflags,PC_NOWIZ))\n     sendtext(\"But you're ALREADY offline!<br/>\", self);\n    else\n    {\n     sendtext(\"You won't hear the wizline from now on.<br/>\", self);\n     set(self.pcflags,PC_NOWIZ);\n    }\n   quit;\n   }\n\n   else if (arg == \"+\")\n   {\n    if (not isset(self.pcflags,PC_NOWIZ))\n     sendtext(\"But you're ALREADY online!<br/>\", self);\n    else\n    {\n     sendtext(\"You can now hear the wizline again.<br/>\", self);\n     unset(self.pcflags, PC_NOWIZ);\n    }\n   quit;\n   }\n\n\n   else if (arg == \"?\")\n   {\n    ch := ghead();\n    cnt := 0;\n\n    while (ch.type == UNIT_ST_PC)\n    {\n     if ((ch.level >= IMMORTAL_LEVEL) and (visible(self,ch)))\n     {\n      if (cnt == 0)\n      {\n       if (ch.minv > 0)\n        tmp := \"*<div class='wiz'>\"+ch.name+\"(\"+itoa(ch.level)+\")\";\n       else\n        tmp := \"<div class='wiz'>\"+ch.name+\"(\"+itoa(ch.level)+\")\";\n\n                  if (isset(ch.pcflags,PC_NOWIZ))\n                   tmp := tmp+\"-<div class='wiz'>\";\n                 }\n      else\n      {\n       if (ch.minv > 0)\n        tmp := tmp+\", *<div class='wiz'>\"+ch.name+\"(\"+itoa(ch.level)+\")\";\n       else\n        tmp := tmp+\"<div class='wiz'>, \"+ch.name+\"(\"+itoa(ch.level)+\")\";\n\n                  if (isset(ch.pcflags, PC_NOWIZ))\n                   tmp := tmp+\"-<div class='wiz'>\";\n                 }\n      cnt := cnt + 1;\n      }\n\n     ch := ch.gnext;\n    }\n\n    sendtext(tmp, self);\n    quit;\n   }\n\n   if (isset(self.pcflags,PC_NOWIZ))\n   {\n    sendtext(\"You're offline!!!<br/>\", self);\n    quit;\n   }\n\n   if ((left(arg,1) == \"#\") and (length(arg) > 1))\n   {\n   tmp := getword(arg);\n   wizlvl := atoi(right(tmp, length(tmp) - 1));\n\n   if (wizlvl > self.level)\n   {\n    sendtext(\"You cannot limit the channel to a higher level than your own.<br/>\", self);\n    quit;\n   }\n\n   lft := \":\"+itoa(wizlvl)+\":\";\n\n\n   }\n   else\n   {\n\n   wizlvl := self.minv;\n   if (wizlvl > 200) lft := \":\"+itoa(wizlvl)+\":\";\n   else lft := \"::\";\n\n\n   }\n\n   ch := ghead();\n\n   while (ch.type == UNIT_ST_PC)\n   {\n\n    if ((ch.level >= wizcmd.level) and (ch.level >= wizlvl) and\n           (not isset(ch.pcflags,PC_NOWIZ)))\n        {\n        if (emote)\n           sendtext(\"<div class='wiz'>\"+lft+\" \"+self.name+\" \"+arg+\"<br/>\", ch);\n        else\n           sendtext(\"<div class='wiz'>\"+lft+\" \"+self.name+\" :: \"+arg+\"<br/>\", ch);\n    }\n    ch := ch.gnext;\n   }\n\n   send_done(\"wiz\", self, null, null, 0, arg, null, CMD_AUTO_NONE);\n quit;\n} dilend"
}